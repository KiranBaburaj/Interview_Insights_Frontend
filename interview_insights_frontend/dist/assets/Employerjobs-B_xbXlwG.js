import{r as x,_ as de,j as e,f as G,I as me,u as ue,a as pe,b as g,T as he,U as xe,k as ge,V as ye,W as be,m as fe,X as O,Y as ve,Z as je,$ as Ce,a0 as _e}from"./index-C5U6rigm.js";import{E as Se}from"./EmployerNavbar-CTIgv8LK.js";import{g as ke,a as we,s as De,T as i,n as Ee,u as Te,c as Je,b as Ae,B as u}from"./Box-CflkHC3m.js";import{C as We}from"./CircularProgress-PmrHjF_T.js";import{T as Fe}from"./ThemeProvider-DCudhIel.js";import{P as qe}from"./List-DtlnwPJQ.js";import{B as o}from"./Button-DSWEA6IS.js";import{T as m,F as C,I as _,S}from"./TextField-Dl5GeK1S.js";import{M as k}from"./MenuItem-CqxVFYli.js";import{F as Me,C as Pe}from"./FormControlLabel-D8V0GqLT.js";import{C as B}from"./Chip-pYDiooH1.js";import{L as H,C as Ne}from"./ListItemText-CyoX1wjJ.js";import{D as Y,a as Q,b as X}from"./DialogContent-CIQSh8Vv.js";import{D as $}from"./DialogTitle-C-eQuz07.js";import"./ExitToApp-Npi_Srsu.js";import"./Business-wVAb1UL4.js";import"./NotificationList-Cyv_Ki3h.js";import"./notificationWebSocket-DMsN5nUd.js";import"./IconButton-DQz-375w.js";import"./Snackbar-nQHxAZcx.js";import"./useMediaQuery-D2a4vlr0.js";import"./useThemeProps-DlnDigSZ.js";import"./Divider-B0dY04nj.js";import"./dividerClasses-BDwgzGKQ.js";import"./Avatar-CfOXhqzT.js";import"./useSlot-DDIs1MSA.js";import"./ListItem-BVairu1D.js";import"./listItemTextClasses-Bo7XHd7I.js";import"./Stack-DBhWGITs.js";function Le(n){return ke("MuiDialogContentText",n)}we("MuiDialogContentText",["root"]);const Re=["children","className"],Ie=n=>{const{classes:y}=n,p=Ae({root:["root"]},Le,y);return G({},y,p)},Ve=De(i,{shouldForwardProp:n=>Ee(n)||n==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(n,y)=>y.root})({}),Ue=x.forwardRef(function(y,t){const p=Te({props:y,name:"MuiDialogContentText"}),{className:w}=p,b=de(p,Re),v=Ie(b);return e.jsx(Ve,G({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:b,className:Je(v.root,w)},p,{classes:v}))}),Oe=[{value:"Full-time",label:"Full-time"},{value:"Part-time",label:"Part-time"},{value:"Contract",label:"Contract"},{value:"Temporary",label:"Temporary"},{value:"Internship",label:"Internship"},{value:"Freelance",label:"Freelance"}],Be=[{value:"Entry level",label:"Entry level"},{value:"Mid level",label:"Mid level"},{value:"Senior level",label:"Senior level"},{value:"Executive",label:"Executive"}],He=me({palette:{primary:{main:"#00796b"},secondary:{main:"#b2dfdb"},text:{primary:"#212121",secondary:"#757575"}},typography:{fontFamily:"Roboto, sans-serif",h4:{fontFamily:"Montserrat, sans-serif",fontWeight:"bold"},h6:{fontFamily:"Montserrat, sans-serif",fontWeight:"bold"}}}),Ye=()=>{const n=ue(),y=pe(),[t,p]=x.useState({id:null,title:"",description:"",responsibilities:"",qualifications:"",nice_to_have:"",employment_type:"",location:"",salary_min:"",salary_max:"",is_remote:!1,application_deadline:"",experience_level:"",job_function:"",categories:[],skills_required:[],status:"open"}),{userid:w}=g(a=>a.auth),{user:b}=g(a=>a.auth),[v,f]=x.useState(!1),[D,F]=x.useState(""),[E,q]=x.useState(""),[M,h]=x.useState(null),[Z,T]=x.useState(!1),[l,z]=x.useState(null),[P,j]=x.useState(!1),N=g(he),J=g(xe),L=g(a=>a.jobCategories.status),K=g(a=>a.jobCategories.error),R=g(ge),I=g(a=>a.jobs.status);x.useEffect(()=>{n(ye()),n(be()),n(fe())},[n,P,v]);const c=a=>{const{name:s,value:r,type:d,checked:A}=a.target;p({...t,[s]:d==="checkbox"?A:r})},ee=a=>{const{value:s}=a.target,r=N.filter(d=>s.includes(d.id)).map(d=>({category:d.name}));p({...t,categories:r})},ae=a=>{const{value:s}=a.target,r=J.filter(d=>s.includes(d.id));p({...t,skills_required:r})},te=a=>{if(a.preventDefault(),h(null),!b||!b.id){console.error("User data is missing or incomplete"),h("User data is missing. Please try logging in again.");return}const s={...t,employer:b.id};t.id?n(O({jobId:t.id,jobData:s})).unwrap().then(()=>{V(),j(!1)}).catch(r=>h(r.message||"An error occurred while updating the job.")):n(ve(s)).unwrap().then(()=>{V(),j(!1)}).catch(r=>h(r.message||"An error occurred while adding the job."))},V=()=>{p({id:null,title:"",description:"",responsibilities:"",qualifications:"",nice_to_have:"",employment_type:"",location:"",salary_min:"",salary_max:"",is_remote:!1,application_deadline:"",experience_level:"",job_function:"",categories:[],skills_required:[],status:"open"})},ie=a=>{p({id:a.id,title:a.title,description:a.description,responsibilities:a.responsibilities,qualifications:a.qualifications,nice_to_have:a.nice_to_have,employment_type:a.employment_type,location:a.location,salary_min:a.salary_min,salary_max:a.salary_max,is_remote:a.is_remote,application_deadline:a.application_deadline,experience_level:a.experience_level,job_function:a.job_function,categories:a.categories.map(s=>({category:s.name})),skills_required:a.skills_required,status:a.status}),j(!0)},ne=a=>{n(je(a)).unwrap().catch(s=>h(s.message||"An error occurred while deleting the job."))},se=a=>{z(a),T(!0)},le=()=>{if(D.trim()===""){h("Category name cannot be empty");return}n(Ce({name:D})).unwrap().then(()=>{f(!1),F("")}).catch(a=>h(a.message||"An error occurred while adding the category."))},re=()=>{if(E.trim()===""){h("Skill name cannot be empty");return}n(_e({name:E})).unwrap().then(()=>{f(!1),q("")}).catch(a=>h(a.message||"An error occurred while adding the skill."))},oe=a=>{y(`/EmployerJobapplicants/${a}`)},ce=(a,s)=>{const r=s==="open"?"closed":"open",d=R.find(W=>W.id===a);if(!d){h("Job not found.");return}const A={...d,status:r};n(O({jobId:a,jobData:A})).unwrap().then(()=>{}).catch(W=>h(W.message||"An error occurred while updating the job status."))},U=R.filter(a=>a.employer===w).sort((a,s)=>a.status==="open"?-1:1);return L==="loading"||I==="loading"?e.jsx(u,{sx:{textAlign:"center",mt:4},children:e.jsx(We,{})}):L==="failed"||I==="failed"?e.jsx(u,{sx:{textAlign:"center",mt:4},children:e.jsxs(i,{color:"error",children:["Error: ",K||"Failed to load jobs."]})}):e.jsx(Fe,{theme:He,children:e.jsxs(u,{sx:{mt:4},children:[e.jsxs(qe,{elevation:3,sx:{p:4},children:[e.jsx(i,{variant:"h4",gutterBottom:!0,children:"Job Management"}),e.jsxs(u,{sx:{mb:2},children:[e.jsx(o,{variant:"contained",color:"primary",onClick:()=>j(!0),sx:{mr:1},children:"Create Job"}),e.jsx(o,{variant:"contained",color:"secondary",onClick:()=>f(!0),children:"Add Category"}),e.jsx(o,{variant:"contained",color:"secondary",onClick:()=>f(!0),sx:{ml:1},children:"Add Skill"})]}),P&&e.jsxs(u,{component:"form",onSubmit:te,sx:{mx:"auto",maxWidth:600},children:[M&&e.jsx(i,{color:"error",children:M}),e.jsx(m,{fullWidth:!0,margin:"normal",label:"Job Title",name:"title",value:t.title,onChange:c,required:!0}),e.jsx(m,{fullWidth:!0,margin:"normal",label:"Job Description",name:"description",value:t.description,onChange:c,required:!0,multiline:!0,rows:4}),e.jsx(m,{fullWidth:!0,margin:"normal",label:"Responsibilities",name:"responsibilities",value:t.responsibilities,onChange:c,multiline:!0,rows:4}),e.jsx(m,{fullWidth:!0,margin:"normal",label:"Qualifications",name:"qualifications",value:t.qualifications,onChange:c,multiline:!0,rows:4}),e.jsx(m,{fullWidth:!0,margin:"normal",label:"Nice to Have",name:"nice_to_have",value:t.nice_to_have,onChange:c,multiline:!0,rows:4}),e.jsxs(C,{fullWidth:!0,margin:"normal",children:[e.jsx(_,{children:"Employment Type"}),e.jsx(S,{name:"employment_type",value:t.employment_type,onChange:c,required:!0,children:Oe.map(a=>e.jsx(k,{value:a.value,children:a.label},a.value))})]}),e.jsx(m,{fullWidth:!0,margin:"normal",label:"Location",name:"location",value:t.location,onChange:c}),e.jsx(m,{fullWidth:!0,margin:"normal",label:"Salary Min",name:"salary_min",value:t.salary_min,onChange:c,type:"number"}),e.jsx(m,{fullWidth:!0,margin:"normal",label:"Salary Max",name:"salary_max",value:t.salary_max,onChange:c,type:"number"}),e.jsx(Me,{control:e.jsx(Pe,{checked:t.is_remote,onChange:c,name:"is_remote"}),label:"Remote"}),e.jsx(m,{fullWidth:!0,margin:"normal",label:"Application Deadline",name:"application_deadline",value:t.application_deadline,onChange:c,type:"date",InputLabelProps:{shrink:!0},inputProps:{min:new Date().toISOString().split("T")[0]}}),e.jsxs(C,{fullWidth:!0,margin:"normal",children:[e.jsx(_,{children:"Experience Level"}),e.jsx(S,{name:"experience_level",value:t.experience_level,onChange:c,required:!0,children:Be.map(a=>e.jsx(k,{value:a.value,children:a.label},a.value))})]}),e.jsx(m,{fullWidth:!0,margin:"normal",label:"Job Function",name:"job_function",value:t.job_function,onChange:c}),e.jsxs(C,{fullWidth:!0,margin:"normal",children:[e.jsx(_,{children:"Categories"}),e.jsx(S,{multiple:!0,value:t.categories.map(a=>a.category),onChange:ee,renderValue:a=>e.jsx(u,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:a.map(s=>e.jsx(B,{label:s},s))}),children:N.map(a=>e.jsx(k,{value:a.id,children:e.jsx(H,{primary:a.name})},a.id))})]}),e.jsxs(C,{fullWidth:!0,margin:"normal",children:[e.jsx(_,{children:"Required Skills"}),e.jsx(S,{multiple:!0,value:t.skills_required.map(a=>a.id),onChange:ae,renderValue:a=>e.jsx(u,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:a.map(s=>{var r;return e.jsx(B,{label:(r=J.find(d=>d.id===s))==null?void 0:r.name},s)})}),children:J.map(a=>e.jsx(k,{value:a.id,children:e.jsx(H,{primary:a.name})},a.id))})]}),e.jsx(o,{type:"submit",variant:"contained",color:"primary",sx:{mt:2},children:t.id?"Update Job":"Create Job"}),e.jsx(o,{variant:"contained",color:"secondary",onClick:()=>j(!1),sx:{ml:1,mt:2},children:"Cancel"})]}),e.jsxs(u,{sx:{mt:4},children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Job Listings"}),U.length===0?e.jsx(i,{children:"No jobs available"}):U.map(a=>e.jsxs(u,{sx:{mb:2,border:"1px solid #ddd",borderRadius:1,p:2},children:[e.jsx(i,{variant:"h6",children:a.title}),e.jsx(i,{variant:"body2",children:a.description}),e.jsxs(i,{variant:"body2",children:["Status: ",a.status]}),e.jsx(o,{variant:"contained",color:"info",onClick:()=>ce(a.id,a.status),sx:{mr:1},children:a.status==="open"?"Close Job":"Open Job"}),e.jsxs(u,{sx:{mt:1},children:[e.jsx(o,{variant:"contained",color:"primary",onClick:()=>ie(a),sx:{mr:1},children:"Edit"}),e.jsx(o,{variant:"contained",color:"error",onClick:()=>ne(a.id),sx:{mr:1},children:"Delete"}),e.jsx(o,{variant:"contained",color:"info",onClick:()=>oe(a.id),children:"View Applicants"}),e.jsx(o,{variant:"contained",color:"secondary",onClick:()=>se(a),children:"View Job"})]})]},a.id))]})]}),e.jsxs(Y,{open:v,onClose:()=>f(!1),children:[e.jsx($,{children:"Add Category or Skill"}),e.jsxs(Q,{children:[e.jsx(Ue,{children:"Enter the name of the new category or skill."}),e.jsx(m,{autoFocus:!0,margin:"dense",label:"Category Name",type:"text",fullWidth:!0,variant:"standard",value:D,onChange:a=>F(a.target.value)}),e.jsx(m,{margin:"dense",label:"Skill Name",type:"text",fullWidth:!0,variant:"standard",value:E,onChange:a=>q(a.target.value)})]}),e.jsxs(X,{children:[e.jsx(o,{onClick:()=>f(!1),children:"Cancel"}),e.jsx(o,{onClick:le,children:"Add Category"}),e.jsx(o,{onClick:re,children:"Add Skill"})]})]}),e.jsxs(Y,{open:Z,onClose:()=>T(!1),children:[e.jsx($,{children:"View Job"}),e.jsx(Q,{children:l&&e.jsxs(e.Fragment,{children:[e.jsx(i,{variant:"h6",children:l.title}),e.jsx(i,{variant:"body2",children:l.description}),e.jsxs(i,{variant:"body2",children:["Responsibilities: ",l.responsibilities]}),e.jsxs(i,{variant:"body2",children:["Qualifications: ",l.qualifications]}),e.jsxs(i,{variant:"body2",children:["Nice to Have: ",l.nice_to_have]}),e.jsxs(i,{variant:"body2",children:["Employment Type: ",l.employment_type]}),e.jsxs(i,{variant:"body2",children:["Location: ",l.location]}),e.jsxs(i,{variant:"body2",children:["Salary: ",l.salary_min," - ",l.salary_max]}),e.jsxs(i,{variant:"body2",children:["Remote: ",l.is_remote?"Yes":"No"]}),e.jsxs(i,{variant:"body2",children:["Application Deadline: ",l.application_deadline]}),e.jsxs(i,{variant:"body2",children:["Experience Level: ",l.experience_level]}),e.jsxs(i,{variant:"body2",children:["Job Function: ",l.job_function]}),e.jsxs(i,{variant:"body2",children:["Categories: ",l.categories.map(a=>a.category).join(", ")]}),e.jsxs(i,{variant:"body2",children:["Required Skills: ",l.skills_required.map(a=>a.name).join(", ")]})]})}),e.jsx(X,{children:e.jsx(o,{onClick:()=>T(!1),children:"Close"})})]})]})})},Ca=()=>(g(n=>n.auth),e.jsxs(u,{sx:{display:"flex",height:"100vh"},children:[e.jsx(Ne,{}),e.jsx(Se,{}),e.jsx(u,{sx:{flexGrow:1,p:2},children:e.jsx(Ye,{})})]}));export{Ca as default};
