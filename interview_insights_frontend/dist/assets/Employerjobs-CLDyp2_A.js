import{I as oe,u as ce,a as de,r as h,b as x,T as me,U as ue,k as pe,V as he,W as xe,m as ge,j as e,X as R,Y as be,Z as ye,$ as fe,a0 as je}from"./index-DFmL8WO5.js";import{E as ve}from"./EmployerNavbar-vh-E0aMN.js";import{B as u,T as t}from"./Box-wyLF954P.js";import{C as Ce}from"./CircularProgress-BAAwtaSQ.js";import{T as _e}from"./ThemeProvider-B0rk2OUQ.js";import{P as Se,B as s}from"./List-CBfMsscO.js";import{T as m,F as j,I as v,S as C}from"./TextField-CdW0niOW.js";import{M as _}from"./MenuItem-Dm_GLYMq.js";import{F as ke,C as we}from"./FormControlLabel-BMjneqLE.js";import{C as O}from"./Chip-Ci-MGmfg.js";import{L as B,C as Ee}from"./ListItemText-BivhFArS.js";import{D as U,a as H,b as Y}from"./DialogContent-CxJEgaG9.js";import{D as Q}from"./DialogTitle-CcHL2f2n.js";import{D as Je}from"./DialogContentText-BJVBi1El.js";import"./ExitToApp-wtQJq0I3.js";import"./Business-B6643A42.js";import"./NotificationList-ByyK_h2p.js";import"./notificationWebSocket-BNbGPfQA.js";import"./IconButton-B044J5JR.js";import"./Snackbar-C8IKSH2Q.js";import"./useMediaQuery-DAkE5S3X.js";import"./useThemeProps-Y4hyjhcU.js";import"./Divider-DJAsH81h.js";import"./dividerClasses-CaFtz4LR.js";import"./Avatar-Bbf_TFwD.js";import"./useSlot-DZ4VWrJ2.js";import"./ListItem-CMFRi8V6.js";import"./listItemTextClasses-CCAxp-Um.js";import"./Stack-C7NAepGA.js";const De=[{value:"Full-time",label:"Full-time"},{value:"Part-time",label:"Part-time"},{value:"Contract",label:"Contract"},{value:"Temporary",label:"Temporary"},{value:"Internship",label:"Internship"},{value:"Freelance",label:"Freelance"}],Ae=[{value:"Entry level",label:"Entry level"},{value:"Mid level",label:"Mid level"},{value:"Senior level",label:"Senior level"},{value:"Executive",label:"Executive"}],Te=oe({palette:{primary:{main:"#00796b"},secondary:{main:"#b2dfdb"},text:{primary:"#212121",secondary:"#757575"}},typography:{fontFamily:"Roboto, sans-serif",h4:{fontFamily:"Montserrat, sans-serif",fontWeight:"bold"},h6:{fontFamily:"Montserrat, sans-serif",fontWeight:"bold"}}}),We=()=>{const c=ce(),X=de(),[i,b]=h.useState({id:null,title:"",description:"",responsibilities:"",qualifications:"",nice_to_have:"",employment_type:"",location:"",salary_min:"",salary_max:"",is_remote:!1,application_deadline:"",experience_level:"",job_function:"",categories:[],skills_required:[],status:"open"}),{userid:f}=x(a=>a.auth);console.log(f),x(a=>a.auth);const[W,g]=h.useState(!1),[S,q]=h.useState(""),[k,F]=h.useState(""),[I,p]=h.useState(null),[$,w]=h.useState(!1),[l,G]=h.useState(null),[L,y]=h.useState(!1),M=x(me),E=x(ue),N=x(a=>a.jobCategories.status),Z=x(a=>a.jobCategories.error),J=x(pe);console.log(J);const P=x(a=>a.jobs.status);h.useEffect(()=>{c(he()),c(xe()),c(ge())},[c,L,W]);const o=a=>{const{name:n,value:r,type:d,checked:A}=a.target;b({...i,[n]:d==="checkbox"?A:r})},z=a=>{const{value:n}=a.target,r=M.filter(d=>n.includes(d.id)).map(d=>({category:d.name}));b({...i,categories:r})},K=a=>{const{value:n}=a.target,r=E.filter(d=>n.includes(d.id));b({...i,skills_required:r})},ee=a=>{if(a.preventDefault(),p(null),!f){console.error("User data is missing or incomplete"),p("User data is missing. Please try logging in again.");return}const n={...i,employer:f};i.id?c(R({jobId:i.id,jobData:n})).unwrap().then(()=>{V(),y(!1)}).catch(r=>p(r.message||"An error occurred while updating the job.")):c(be(n)).unwrap().then(()=>{V(),y(!1)}).catch(r=>p(r.message||"An error occurred while adding the job."))},V=()=>{b({id:null,title:"",description:"",responsibilities:"",qualifications:"",nice_to_have:"",employment_type:"",location:"",salary_min:"",salary_max:"",is_remote:!1,application_deadline:"",experience_level:"",job_function:"",categories:[],skills_required:[],status:"open"})},ae=a=>{b({id:a.id,title:a.title,description:a.description,responsibilities:a.responsibilities,qualifications:a.qualifications,nice_to_have:a.nice_to_have,employment_type:a.employment_type,location:a.location,salary_min:a.salary_min,salary_max:a.salary_max,is_remote:a.is_remote,application_deadline:a.application_deadline,experience_level:a.experience_level,job_function:a.job_function,categories:a.categories.map(n=>({category:n.name})),skills_required:a.skills_required,status:a.status}),y(!0)},ie=a=>{c(ye(a)).unwrap().catch(n=>p(n.message||"An error occurred while deleting the job."))},te=a=>{G(a),w(!0)},ne=()=>{if(S.trim()===""){p("Category name cannot be empty");return}c(fe({name:S})).unwrap().then(()=>{g(!1),q("")}).catch(a=>p(a.message||"An error occurred while adding the category."))},le=()=>{if(k.trim()===""){p("Skill name cannot be empty");return}c(je({name:k})).unwrap().then(()=>{g(!1),F("")}).catch(a=>p(a.message||"An error occurred while adding the skill."))},re=a=>{X(`/EmployerJobapplicants/${a}`)},se=(a,n)=>{const r=n==="open"?"closed":"open",d=J.find(T=>T.id===a);if(!d){p("Job not found.");return}const A={...d,status:r};c(R({jobId:a,jobData:A})).unwrap().then(()=>{}).catch(T=>p(T.message||"An error occurred while updating the job status."))},D=J.filter(a=>a.employer==f).sort((a,n)=>a.status==="open"?-1:1);return console.log(D),N==="loading"||P==="loading"?e.jsx(u,{sx:{textAlign:"center",mt:4},children:e.jsx(Ce,{})}):N==="failed"||P==="failed"?e.jsx(u,{sx:{textAlign:"center",mt:4},children:e.jsxs(t,{color:"error",children:["Error: ",Z||"Failed to load jobs."]})}):e.jsx(_e,{theme:Te,children:e.jsxs(u,{sx:{mt:4},children:[e.jsxs(Se,{elevation:3,sx:{p:4},children:[e.jsx(t,{variant:"h4",gutterBottom:!0,children:"Job Management"}),e.jsxs(u,{sx:{mb:2},children:[e.jsx(s,{variant:"contained",color:"primary",onClick:()=>y(!0),sx:{mr:1},children:"Create Job"}),e.jsx(s,{variant:"contained",color:"secondary",onClick:()=>g(!0),children:"Add Category"}),e.jsx(s,{variant:"contained",color:"secondary",onClick:()=>g(!0),sx:{ml:1},children:"Add Skill"})]}),L&&e.jsxs(u,{component:"form",onSubmit:ee,sx:{mx:"auto",maxWidth:600},children:[I&&e.jsx(t,{color:"error",children:I}),e.jsx(m,{fullWidth:!0,margin:"normal",label:"Job Title",name:"title",value:i.title,onChange:o,required:!0}),e.jsx(m,{fullWidth:!0,margin:"normal",label:"Job Description",name:"description",value:i.description,onChange:o,required:!0,multiline:!0,rows:4}),e.jsx(m,{fullWidth:!0,margin:"normal",label:"Responsibilities",name:"responsibilities",value:i.responsibilities,onChange:o,multiline:!0,rows:4}),e.jsx(m,{fullWidth:!0,margin:"normal",label:"Qualifications",name:"qualifications",value:i.qualifications,onChange:o,multiline:!0,rows:4}),e.jsx(m,{fullWidth:!0,margin:"normal",label:"Nice to Have",name:"nice_to_have",value:i.nice_to_have,onChange:o,multiline:!0,rows:4}),e.jsxs(j,{fullWidth:!0,margin:"normal",children:[e.jsx(v,{children:"Employment Type"}),e.jsx(C,{name:"employment_type",value:i.employment_type,onChange:o,required:!0,children:De.map(a=>e.jsx(_,{value:a.value,children:a.label},a.value))})]}),e.jsx(m,{fullWidth:!0,margin:"normal",label:"Location",name:"location",value:i.location,onChange:o}),e.jsx(m,{fullWidth:!0,margin:"normal",label:"Salary Min",name:"salary_min",value:i.salary_min,onChange:o,type:"number"}),e.jsx(m,{fullWidth:!0,margin:"normal",label:"Salary Max",name:"salary_max",value:i.salary_max,onChange:o,type:"number"}),e.jsx(ke,{control:e.jsx(we,{checked:i.is_remote,onChange:o,name:"is_remote"}),label:"Remote"}),e.jsx(m,{fullWidth:!0,margin:"normal",label:"Application Deadline",name:"application_deadline",value:i.application_deadline,onChange:o,type:"date",InputLabelProps:{shrink:!0},inputProps:{min:new Date().toISOString().split("T")[0]}}),e.jsxs(j,{fullWidth:!0,margin:"normal",children:[e.jsx(v,{children:"Experience Level"}),e.jsx(C,{name:"experience_level",value:i.experience_level,onChange:o,required:!0,children:Ae.map(a=>e.jsx(_,{value:a.value,children:a.label},a.value))})]}),e.jsx(m,{fullWidth:!0,margin:"normal",label:"Job Function",name:"job_function",value:i.job_function,onChange:o}),e.jsxs(j,{fullWidth:!0,margin:"normal",children:[e.jsx(v,{children:"Categories"}),e.jsx(C,{multiple:!0,value:i.categories.map(a=>a.category),onChange:z,renderValue:a=>e.jsx(u,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:a.map(n=>e.jsx(O,{label:n},n))}),children:M.map(a=>e.jsx(_,{value:a.id,children:e.jsx(B,{primary:a.name})},a.id))})]}),e.jsxs(j,{fullWidth:!0,margin:"normal",children:[e.jsx(v,{children:"Required Skills"}),e.jsx(C,{multiple:!0,value:i.skills_required.map(a=>a.id),onChange:K,renderValue:a=>e.jsx(u,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:a.map(n=>{var r;return e.jsx(O,{label:(r=E.find(d=>d.id===n))==null?void 0:r.name},n)})}),children:E.map(a=>e.jsx(_,{value:a.id,children:e.jsx(B,{primary:a.name})},a.id))})]}),e.jsx(s,{type:"submit",variant:"contained",color:"primary",sx:{mt:2},children:i.id?"Update Job":"Create Job"}),e.jsx(s,{variant:"contained",color:"secondary",onClick:()=>y(!1),sx:{ml:1,mt:2},children:"Cancel"})]}),e.jsxs(u,{sx:{mt:4},children:[e.jsx(t,{variant:"h6",gutterBottom:!0,children:"Job Listings"}),D.length===0?e.jsx(t,{children:"No jobs available"}):D.map(a=>e.jsxs(u,{sx:{mb:2,border:"1px solid #ddd",borderRadius:1,p:2},children:[e.jsx(t,{variant:"h6",children:a.title}),e.jsx(t,{variant:"body2",children:a.description}),e.jsxs(t,{variant:"body2",children:["Status: ",a.status]}),e.jsx(s,{variant:"contained",color:"info",onClick:()=>se(a.id,a.status),sx:{mr:1},children:a.status==="open"?"Close Job":"Open Job"}),e.jsxs(u,{sx:{mt:1},children:[e.jsx(s,{variant:"contained",color:"primary",onClick:()=>ae(a),sx:{mr:1},children:"Edit"}),e.jsx(s,{variant:"contained",color:"error",onClick:()=>ie(a.id),sx:{mr:1},children:"Delete"}),e.jsx(s,{variant:"contained",color:"info",onClick:()=>re(a.id),children:"View Applicants"}),e.jsx(s,{variant:"contained",color:"secondary",onClick:()=>te(a),children:"View Job"})]})]},a.id))]})]}),e.jsxs(U,{open:W,onClose:()=>g(!1),children:[e.jsx(Q,{children:"Add Category or Skill"}),e.jsxs(H,{children:[e.jsx(Je,{children:"Enter the name of the new category or skill."}),e.jsx(m,{autoFocus:!0,margin:"dense",label:"Category Name",type:"text",fullWidth:!0,variant:"standard",value:S,onChange:a=>q(a.target.value)}),e.jsx(m,{margin:"dense",label:"Skill Name",type:"text",fullWidth:!0,variant:"standard",value:k,onChange:a=>F(a.target.value)})]}),e.jsxs(Y,{children:[e.jsx(s,{onClick:()=>g(!1),children:"Cancel"}),e.jsx(s,{onClick:ne,children:"Add Category"}),e.jsx(s,{onClick:le,children:"Add Skill"})]})]}),e.jsxs(U,{open:$,onClose:()=>w(!1),children:[e.jsx(Q,{children:"View Job"}),e.jsx(H,{children:l&&e.jsxs(e.Fragment,{children:[e.jsx(t,{variant:"h6",children:l.title}),e.jsx(t,{variant:"body2",children:l.description}),e.jsxs(t,{variant:"body2",children:["Responsibilities: ",l.responsibilities]}),e.jsxs(t,{variant:"body2",children:["Qualifications: ",l.qualifications]}),e.jsxs(t,{variant:"body2",children:["Nice to Have: ",l.nice_to_have]}),e.jsxs(t,{variant:"body2",children:["Employment Type: ",l.employment_type]}),e.jsxs(t,{variant:"body2",children:["Location: ",l.location]}),e.jsxs(t,{variant:"body2",children:["Salary: ",l.salary_min," - ",l.salary_max]}),e.jsxs(t,{variant:"body2",children:["Remote: ",l.is_remote?"Yes":"No"]}),e.jsxs(t,{variant:"body2",children:["Application Deadline: ",l.application_deadline]}),e.jsxs(t,{variant:"body2",children:["Experience Level: ",l.experience_level]}),e.jsxs(t,{variant:"body2",children:["Job Function: ",l.job_function]}),e.jsxs(t,{variant:"body2",children:["Categories: ",l.categories.map(a=>a.category).join(", ")]}),e.jsxs(t,{variant:"body2",children:["Required Skills: ",l.skills_required.map(a=>a.name).join(", ")]})]})}),e.jsx(Y,{children:e.jsx(s,{onClick:()=>w(!1),children:"Close"})})]})]})})},oa=()=>(x(c=>c.auth),e.jsxs(u,{sx:{display:"flex",height:"100vh"},children:[e.jsx(Ee,{}),e.jsx(ve,{}),e.jsx(u,{sx:{flexGrow:1,p:2},children:e.jsx(We,{})})]}));export{oa as default};
