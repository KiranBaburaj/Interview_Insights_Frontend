import{a as E,u as D,b as o,r as c,ax as B,ay as L,az as z,j as e,ak as J}from"./index-UPAOvg_G.js";import{J as G}from"./JobseekerNavbar-5pkF--us.js";import{d as M}from"./Search-D_H0Ixnc.js";import{d as N}from"./FilterList-BrYE5wps.js";import{u as W,B as f}from"./List-GWNcwQbp.js";import{B as s,T as a}from"./Box-BWDG5rNi.js";import{C as P}from"./CircularProgress-B7FC7rbV.js";import{C as $}from"./Container-CL_Opt4V.js";import{D as b}from"./Divider-DuL92jII.js";import{T as H,S as O}from"./TextField-Btq3qCLk.js";import{M as i}from"./MenuItem-Dt2xTNEu.js";import{I as U}from"./IconButton-BStxGFSI.js";import{G as v}from"./Grid-C4mvyxN6.js";import{C as q,a as K}from"./CardContent-B8Qwt7o6.js";import{A as Q}from"./Avatar-CS5raCN_.js";import{C as V}from"./Chip-SM2CToGV.js";import{C as X}from"./ListItemText-NU8dwKLc.js";import{T as Y}from"./ExitToApp-CkJU4z1a.js";import"./NotificationList-YuIR9vQG.js";import"./notificationWebSocket-BXbQgH3j.js";import"./Snackbar-DMjJKLi-.js";import"./useMediaQuery-CLrKrbJU.js";import"./useThemeProps-Scof9SRk.js";import"./ListItem-BXTzSaQX.js";import"./dividerClasses-CidYI2B0.js";import"./listItemTextClasses-Dp4iva8S.js";import"./useSlot-D2mK9hbB.js";const Z=()=>{const w=E(),n=D();W();const x=o(t=>t.myapplications.applications),p=o(t=>t.myapplications.status),g=o(t=>t.myapplications.error),d=o(t=>t.interviews.interviews),j=o(t=>t.interviews.status),y=o(t=>t.interviews.error),h=o(t=>t.interviews.currentFeedback),C=o(t=>t.auth.userid),[u,S]=c.useState(""),[k,A]=c.useState(x),[m,_]=c.useState("");c.useEffect(()=>{n(B()),n(L()),d.length>0&&d.forEach(t=>{n(z(t.id))})},[n,d.length]),c.useEffect(()=>{let t=x;m&&(t=t.filter(r=>r.status===m)),t=t.filter(r=>r.job_details.company.name.toLowerCase().includes(u.toLowerCase())||r.job_details.title.toLowerCase().includes(u.toLowerCase())),A(t)},[u,x,m]);const F=(t,r)=>{t&&r&&n(J({jobseekerId:t,employerId:r})).unwrap().then(()=>{w("/chat")}).catch(l=>{console.error("Failed to create chat room:",l)})},I=t=>{window.open(`${t}`,"_blank")},T=t=>d.find(r=>r.job_application===t),R=t=>h&&h.interview_schedule===t?h:null;return p==="loading"||j==="loading"?e.jsx(s,{sx:{textAlign:"center",mt:4},children:e.jsx(P,{})}):p==="failed"||j==="failed"?e.jsx(s,{sx:{textAlign:"center",mt:4},children:e.jsxs(a,{color:"error",children:["Error: ",g||y]})}):e.jsxs($,{maxWidth:"md",sx:{mt:4},children:[e.jsx(a,{variant:"h4",align:"center",sx:{mb:2,color:"#004d40"},children:"My Applications"}),e.jsx(b,{sx:{mb:2,backgroundColor:"#004d40"}}),e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[e.jsx(H,{placeholder:"Search Jobs",variant:"outlined",size:"small",sx:{flexGrow:1,mr:1,borderRadius:2},InputProps:{startAdornment:e.jsx(M,{})},onChange:t=>S(t.target.value)}),e.jsxs(O,{value:m,onChange:t=>_(t.target.value),displayEmpty:!0,variant:"outlined",size:"small",sx:{mr:1,minWidth:120,borderRadius:2},children:[e.jsx(i,{value:"",children:e.jsx("em",{children:"All Status"})}),e.jsx(i,{value:"applied",children:"Applied"}),e.jsx(i,{value:"reviewed",children:"Reviewed"}),e.jsx(i,{value:"interview_scheduled",children:"Interview Scheduled"}),e.jsx(i,{value:"interviewed",children:"Interviewed"}),e.jsx(i,{value:"offered",children:"Offered"}),e.jsx(i,{value:"hired",children:"Hired"}),e.jsx(i,{value:"rejected",children:"Rejected"})]}),e.jsx(U,{children:e.jsx(N,{})})]}),e.jsx(v,{container:!0,spacing:2,children:k.map(t=>{const r=T(t.id),l=r?R(r.id):null;return e.jsx(v,{item:!0,xs:12,sm:6,md:4,children:e.jsx(q,{sx:{mb:2,p:2,borderRadius:7,transition:".1s","&:hover":{boxShadow:20},height:360},children:e.jsxs(K,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%"},children:[e.jsxs(s,{children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(Q,{src:t.job_details.company.logoUrl,alt:t.job_details.company.name,sx:{mr:2,width:56,height:56}}),e.jsx(a,{variant:"h6",sx:{fontWeight:"bold",color:"#004d40"},children:t.job_details.company.name})]}),e.jsx(a,{variant:"subtitle1",children:t.job_details.title}),e.jsxs(a,{variant:"body2",sx:{color:"text.secondary"},children:["Applied on: ",new Date(t.applied_at).toLocaleDateString()]}),e.jsx(V,{label:t.status,sx:{mt:1,bgcolor:"#00796b",color:"white"}}),e.jsx(b,{sx:{my:1}}),e.jsx(a,{variant:"body2",children:r?e.jsxs(s,{children:["Scheduled: ",new Date(r.scheduled_time).toLocaleString(),e.jsx("br",{}),"Location: ",r.location]}):e.jsx(s,{sx:{color:"text.secondary",fontStyle:"italic"},children:"No Interview Scheduled"})}),e.jsx(a,{variant:"body2",children:l?e.jsxs(s,{children:["Score: ",l.score,e.jsx("br",{}),"Feedback: ",l.feedback]}):e.jsx(s,{sx:{color:"text.secondary",fontStyle:"italic"},children:"No Feedback Available"})})]}),e.jsxs(s,{sx:{mt:2,display:"flex",justifyContent:"space-between"},children:[e.jsx(f,{variant:"outlined",onClick:()=>I(t.resume),size:"small",sx:{borderRadius:2,textTransform:"none","&:hover":{backgroundColor:"#b2dfdb",color:"#004d40"}},children:"See Application"}),e.jsx(f,{variant:"contained",onClick:()=>F(C,t.job_details.employer),size:"small",sx:{borderRadius:2,textTransform:"none",backgroundColor:"#00796b",color:"white","&:hover":{backgroundColor:"#004d40",color:"#fff"}},children:"Chat"})]})]})})},t.id)})})]})},_e=()=>e.jsxs(s,{sx:{display:"flex"},children:[e.jsx(X,{}),e.jsx(G,{}),e.jsxs(s,{component:"main",sx:{flexGrow:1,p:3,width:{sm:"calc(100% - 240px)"}},children:[e.jsx(Y,{}),e.jsx(a,{variant:"h4",component:"h1",gutterBottom:!0}),e.jsx(Z,{})]})]});export{_e as default};
