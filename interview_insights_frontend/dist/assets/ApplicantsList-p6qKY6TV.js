import{I as L,a9 as F,u as R,b as h,a as W,r as p,n as D,j as e,ap as $,ah as J}from"./index-bKEvfPtb.js";import{d as H}from"./Search-Corcms0a.js";import{d as M}from"./FilterList-D_YVe-3X.js";import{E as O}from"./EmployerNavbar-BLhTRnsq.js";import{B as a,T as s}from"./Box-KVJ19Ke4.js";import{C as z}from"./CircularProgress-l8Op2OUJ.js";import{T as q}from"./ThemeProvider-Ch8yek-a.js";import{C as G}from"./ListItemText-CAzSisON.js";import{C as K}from"./Container-BHFrtP7H.js";import{C as Q,a as U}from"./CardContent-Cm3FHfQn.js";import{T as V,S as X}from"./TextField-D4NmMvGw.js";import{I as Y}from"./IconButton-DsMphpXG.js";import{D as m}from"./Divider-6NLqVLvo.js";import{T as Z,a as ee,b as re,c as A,d as t,e as se}from"./TableRow-B-pZFCyX.js";import{P as ie}from"./List-VCIfHaEB.js";import{A as S}from"./Avatar-DKFBe6VA.js";import{M as o}from"./MenuItem-BbvIGZhp.js";import{B as d}from"./Button-B8W_qAeM.js";import{D as te,a as ne,b as ae}from"./DialogContent-DLgfbyil.js";import{D as oe}from"./DialogTitle-BIUSOwDz.js";import"./ExitToApp-BX3USrtW.js";import"./Business-Vw10Gk2m.js";import"./NotificationList-DZfe7fXp.js";import"./notificationWebSocket-C6Wl10v1.js";import"./Snackbar-CdFsXFL0.js";import"./useMediaQuery-BhrY9dbr.js";import"./useThemeProps-Cc30N31e.js";import"./ListItem-DdYuAq6l.js";import"./listItemTextClasses-DvdotDCz.js";import"./dividerClasses--ex_jxjK.js";import"./useSlot-Bw0yhGht.js";const le=L({palette:{primary:{main:"#00796b"},secondary:{main:"#b2dfdb"},text:{primary:"#212121",secondary:"#757575"}},typography:{fontFamily:"Roboto, sans-serif",h6:{fontFamily:"Montserrat, sans-serif",fontWeight:"bold"}}}),Je=()=>{const{jobId:j}=F(),l=R(),b=h(r=>r.applicants.applicants),u=h(r=>r.applicants.status),T=h(r=>r.applicants.error),v=W(),f=h(r=>r.auth.userid),[P,_]=p.useState(!1),[i,g]=p.useState(null);p.useEffect(()=>{l(D(j))},[l,j]);const I=(r,n)=>{l($({applicantId:r,status:n})).then(()=>{l(D(j))})},E=r=>{r&&f&&l(J({jobseekerId:r,employerId:f})).unwrap().then(()=>{v("/Employer/chat")}).catch(n=>{console.error("Failed to create chat room:",n)})},N=r=>{window.open(`http://localhost:8000${r}`,"_blank")},B=r=>{g(r),_(!0)},y=()=>{_(!1),g(null)};return u==="loading"?e.jsx(a,{sx:{textAlign:"center",mt:4},children:e.jsx(z,{})}):u==="failed"?e.jsx(a,{sx:{textAlign:"center",mt:4},children:e.jsxs(s,{color:"error",children:["Error: ",T]})}):e.jsx(q,{theme:le,children:e.jsxs(a,{sx:{display:"flex"},children:[e.jsx(G,{}),e.jsx(O,{}),e.jsxs(K,{maxWidth:"lg",sx:{mt:4},children:[e.jsx(Q,{children:e.jsxs(U,{children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[e.jsxs(s,{variant:"h6",children:["Total Applicants: ",b.length]}),e.jsxs(a,{children:[e.jsx(V,{placeholder:"Search Applicants",variant:"outlined",size:"small",sx:{mr:2},InputProps:{startAdornment:e.jsx(H,{})}}),e.jsx(Y,{children:e.jsx(M,{})})]})]}),e.jsx(m,{}),e.jsx(Z,{component:ie,children:e.jsxs(ee,{children:[e.jsx(re,{children:e.jsxs(A,{children:[e.jsx(t,{children:"Full Name"}),e.jsx(t,{children:"Hiring Stage"}),e.jsx(t,{children:"Applied Date"}),e.jsx(t,{children:"Schedule"}),e.jsx(t,{children:"Action"}),e.jsx(t,{children:"Chat"}),e.jsx(t,{children:"Profile"})]})}),e.jsx(se,{children:b.map(r=>e.jsxs(A,{children:[e.jsx(t,{children:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(S,{src:`http://localhost:8000${r.job_seeker.profile_photo}`,alt:r.job_seeker.user.full_name,sx:{mr:2,width:40,height:40}}),r.job_seeker.user.full_name]})}),e.jsx(t,{children:e.jsxs(X,{value:r.status||"N/A",onChange:n=>I(r.id,n.target.value),variant:"outlined",children:[e.jsx(o,{value:"applied",children:"Applied"}),e.jsx(o,{value:"reviewed",children:"Reviewed"}),e.jsx(o,{value:"interview_scheduled",children:"Interview Scheduled"}),e.jsx(o,{value:"interviewed",children:"Interviewed"}),e.jsx(o,{value:"hired",children:"Hired"}),e.jsx(o,{value:"rejected",children:"Rejected"})]})}),e.jsx(t,{children:new Date(r.applied_at).toLocaleDateString()}),e.jsx(t,{children:e.jsx(d,{variant:"outlined",onClick:()=>N(r.resume),children:"See Application"})}),e.jsx(t,{children:e.jsx(d,{variant:"contained",color:"primary",onClick:()=>v(`/schedule-interview/${r.id}`),children:"Schedule Interview"})}),e.jsx(t,{children:e.jsx(d,{onClick:()=>E(r.job_seeker.user.id),children:" Chat"})}),e.jsx(t,{children:e.jsx(d,{onClick:()=>B(r),children:"Profile"})})]},r.id))})]})})]})}),e.jsxs(te,{open:P,onClose:y,fullWidth:!0,maxWidth:"sm",children:[e.jsx(oe,{children:"Applicant Profile"}),e.jsx(ne,{children:i&&e.jsxs("div",{children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(S,{src:`http://localhost:8000${i.job_seeker.profile_photo}`,alt:i.job_seeker.user.full_name,sx:{mr:2,width:80,height:80}}),e.jsx(s,{variant:"h6",children:i.job_seeker.user.full_name})]}),e.jsxs(s,{variant:"body1",children:[e.jsx("strong",{children:"Email:"})," ",i.job_seeker.user.email]}),e.jsxs(s,{variant:"body1",children:[e.jsx("strong",{children:"Phone Number:"})," ",i.job_seeker.phone_number]}),e.jsxs(s,{variant:"body1",children:[e.jsx("strong",{children:"Date of Birth:"})," ",new Date(i.job_seeker.date_of_birth).toLocaleDateString()]}),e.jsxs(s,{variant:"body1",children:[e.jsx("strong",{children:"Bio:"})," ",i.job_seeker.bio]}),e.jsxs(s,{variant:"body1",children:[e.jsx("strong",{children:"LinkedIn:"})," ",i.job_seeker.linkedin_url||"N/A"]}),e.jsxs(s,{variant:"body1",children:[e.jsx("strong",{children:"Portfolio:"})," ",i.job_seeker.portfolio_url||"N/A"]}),e.jsxs(s,{variant:"body1",children:[e.jsx("strong",{children:"Current Job Title:"})," ",i.job_seeker.current_job_title]}),e.jsxs(s,{variant:"body1",children:[e.jsx("strong",{children:"Job Preferences:"})," ",i.job_seeker.job_preferences]}),e.jsx(s,{variant:"h6",style:{marginTop:"16px"},children:"Work Experience"}),i.job_seeker.work_experience&&i.job_seeker.work_experience.length>0?i.job_seeker.work_experience.map(r=>e.jsxs("div",{children:[e.jsxs(s,{variant:"body1",children:[e.jsx("strong",{children:"Job Title:"})," ",r.job_title]}),e.jsxs(s,{variant:"body1",children:[e.jsx("strong",{children:"Company:"})," ",r.company_name]}),e.jsxs(s,{variant:"body1",children:[e.jsx("strong",{children:"Location:"})," ",r.company_location]}),e.jsxs(s,{variant:"body1",children:[e.jsx("strong",{children:"Start Date:"})," ",new Date(r.start_date).toLocaleDateString()]}),e.jsxs(s,{variant:"body1",children:[e.jsx("strong",{children:"End Date:"})," ",new Date(r.end_date).toLocaleDateString()||"Present"]}),e.jsx(m,{style:{margin:"10px 0"}})]},r.id)):e.jsx(s,{variant:"body1",children:"No work experience available."}),e.jsx(s,{variant:"h6",style:{marginTop:"16px"},children:"Skills"}),i.job_seeker.skills&&i.job_seeker.skills.length>0?i.job_seeker.skills.map(r=>e.jsxs(s,{variant:"body1",children:[e.jsx("strong",{children:r.skill_name})," - ",r.proficiency_level]},r.id)):e.jsx(s,{variant:"body1",children:"No skills available."}),e.jsx(s,{variant:"h6",style:{marginTop:"16px"},children:"Interview Feedback"}),i.job_seeker.interview_feedback&&i.job_seeker.interview_feedback.length>0?i.job_seeker.interview_feedback.filter(r=>r.is_approved).map(r=>{var C,w;(C=i.job_seeker.interview_schedule)==null||C.find(x=>x.id===r.interview_schedule);const n=(w=i.job_seeker.myapplications)==null?void 0:w.find(x=>x.id===i.id),c=n?n.job_details:null,k=c?c.company:null;return e.jsxs("div",{children:[e.jsxs(s,{variant:"body1",children:[e.jsx("strong",{children:"Stage:"})," ",r.stage]}),e.jsxs(s,{variant:"body1",children:[e.jsx("strong",{children:"Feedback:"})," ",r.feedback]}),e.jsxs(s,{variant:"body1",children:[e.jsx("strong",{children:"Provided At:"})," ",new Date(r.provided_at).toLocaleDateString()]}),c&&k&&e.jsxs("div",{children:[e.jsxs(s,{variant:"body1",children:[e.jsx("strong",{children:"Job Title:"})," ",c.title]}),e.jsxs(s,{variant:"body1",children:[e.jsx("strong",{children:"Company:"})," ",k.name]})]}),e.jsx(m,{style:{margin:"10px 0"}})]},r.id)}):e.jsx(s,{variant:"body1",children:"No feedback available."})]})}),e.jsx(ae,{children:e.jsx(d,{onClick:y,children:"Close"})})]})]})]})})};export{Je as default};
