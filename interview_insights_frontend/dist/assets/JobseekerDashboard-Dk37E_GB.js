import{i as u,j as e,u as N,b as W,r as p,h as K,L as b}from"./index-CcN-DTrd.js";import{J as U}from"./JobseekerNavbar-osRH-Y-e.js";import{r as h,T as Q}from"./ExitToApp-D75zZrdY.js";import{d as i,L as X,A as Y,D as Z,P as ee,a as te,C as re,T as ae,b as se}from"./AdapterDayjs-Vg3AzqTu.js";import{B as l,T as a}from"./Box-DuwEP3sn.js";import{C as oe,L as ie}from"./ListItemText-CvejhR3n.js";import{C as ne}from"./CircularProgress-DKiJi9Ig.js";import{G as v}from"./Grid-B4CcocwA.js";import{P as d,L as le}from"./List-f2p8LFRy.js";import{I as g}from"./IconButton-CaigptHL.js";import{L as de}from"./ListItem-ulvn5VYx.js";import{D as ce,a as xe,b as ue}from"./DialogContent-5QJpfXgY.js";import{D as he}from"./DialogTitle-6UU7PvYl.js";import{B as me}from"./Button-B4HMTSQ_.js";import"./NotificationList-B0HaLYE3.js";import"./notificationWebSocket-Bge1OkoF.js";import"./MenuItem-B67srvV4.js";import"./dividerClasses-DNCfh70r.js";import"./listItemTextClasses-Cw1BmV-b.js";import"./TextField-SyRqpSkH.js";import"./Snackbar-CP-zon6U.js";import"./useMediaQuery-DWjucTMn.js";import"./useThemeProps-D2YwAPTy.js";import"./Divider-DK3G545Z.js";import"./Avatar-BvQvziBJ.js";import"./useSlot-DPsh2MPD.js";import"./isBetween-DTS1PIv1.js";import"./Stack-DA0ezx0K.js";import"./visuallyHidden-Dan1xhjv.js";import"./Chip-DfqdRJ_M.js";var _={},pe=u;Object.defineProperty(_,"__esModule",{value:!0});var P=_.default=void 0,fe=pe(h()),je=e;P=_.default=(0,fe.default)((0,je.jsx)("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"}),"CalendarToday");var D={},be=u;Object.defineProperty(D,"__esModule",{value:!0});var f=D.default=void 0,ve=be(h()),ge=e;f=D.default=(0,ve.default)((0,ge.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos");var R={},ye=u;Object.defineProperty(R,"__esModule",{value:!0});var y=R.default=void 0,_e=ye(h()),De=e;y=R.default=(0,_e.default)((0,De.jsx)("path",{d:"M17 10H7v2h10zm2-7h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H5V8h14zm-5-5H7v2h7z"}),"EventNote");var I={},Re=u;Object.defineProperty(I,"__esModule",{value:!0});var F=I.default=void 0,Ie=Re(h()),we=e;F=I.default=(0,Ie.default)((0,we.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"History");var w={},Se=u;Object.defineProperty(w,"__esModule",{value:!0});var k=w.default=void 0,$e=Se(h()),Ce=e;k=w.default=(0,$e.default)((0,Ce.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm2 16H8v-2h8zm0-4H8v-2h8zm-3-5V3.5L18.5 9z"}),"Description");const T=["#0088FE","#00C49F","#FFBB28","#FF8042"],it=()=>{const S=N(),{data:s,status:c}=W(t=>t.profile),[n,z]=p.useState([null,null]),[J,V]=p.useState(!1),[j,M]=p.useState(null);p.useEffect(()=>{c==="idle"&&S(K())},[S,c]);const O=t=>{z(t)},$=i(),x=(s==null?void 0:s.myapplications.filter(t=>{const r=i(t.applied_at);return(!n[0]||r.isAfter(i(n[0]).subtract(1,"day")))&&(!n[1]||r.isBefore(i(n[1]).add(1,"day")))}))||[],m=(s==null?void 0:s.interview_schedule.filter(t=>{const r=i(t.scheduled_time);return(!n[0]||r.isAfter(i(n[0]).subtract(1,"day")))&&(!n[1]||r.isBefore(i(n[1]).add(1,"day")))}))||[],C=m.filter(t=>i(t.scheduled_time).isBefore($,"day")),L=m.filter(t=>i(t.scheduled_time).isAfter($,"day")),H=x.reduce((t,r)=>(t[r.status]=(t[r.status]||0)+1,t),{}),A=()=>{V(!1),M(null)},B=m.map(t=>{const r=x.find(o=>o.id===t.job_application);return{...t,job_details:r?r.job_details:null}}),E=t=>{const r=s.interview_feedback.find(o=>o.interview_schedule===t);return r||null},q=()=>{const t=i().hour();return t<12?"Good morning":t<18?"Good afternoon":"Good evening"};return e.jsx(X,{dateAdapter:Y,children:e.jsxs(l,{sx:{display:"flex",bgcolor:"#f5f5f5"},children:[e.jsx(oe,{}),e.jsx(U,{}),e.jsxs(l,{component:"main",sx:{flexGrow:1,p:3,width:{sm:"calc(100% - 240px)"},bgcolor:"#fff",borderRadius:2,boxShadow:3},children:[e.jsx(Q,{}),e.jsxs(l,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsxs(a,{variant:"h4",component:"h1",sx:{color:"#3f51b5",fontWeight:"bold"},children:[q(),", ",s?s.user.full_name:"Jobseeker"]}),e.jsxs(l,{display:"flex",alignItems:"center",children:[e.jsx(P,{}),e.jsx(Z,{sx:{mx:2},startText:"Start",endText:"End",value:n,onChange:O})]})]}),c==="loading"&&e.jsx(ne,{}),c==="failed"&&e.jsx(a,{color:"error",children:"Error loading profile."}),c==="succeeded"&&s&&e.jsxs(e.Fragment,{children:[e.jsxs(v,{container:!0,spacing:2,mb:3,children:[e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsxs(d,{sx:{p:2,textAlign:"center",bgcolor:"#3f51b5",color:"white",borderRadius:2,boxShadow:3},children:[e.jsx(a,{variant:"h6",children:"Total Jobs Applied"}),e.jsx(a,{variant:"h4",children:x.length})]})}),e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsxs(d,{sx:{p:2,textAlign:"center",bgcolor:"#f50057",color:"white",borderRadius:2,boxShadow:3},children:[e.jsx(a,{variant:"h6",children:"Interviewed"}),e.jsx(a,{variant:"h4",children:m.length})]})})]}),e.jsxs(d,{sx:{p:2,mb:3,borderRadius:2,boxShadow:3},children:[e.jsxs(a,{variant:"h6",gutterBottom:!0,sx:{color:"#3f51b5",display:"flex",alignItems:"center"},children:[e.jsx(y,{sx:{marginRight:1}}),"Jobs Applied Status"]}),e.jsx(l,{display:"flex",justifyContent:"center",children:e.jsxs(ee,{width:400,height:400,children:[e.jsx(te,{data:Object.entries(H).map(([t,r])=>({name:t,value:r})),cx:"50%",cy:"50%",labelLine:!1,label:({name:t,percent:r})=>`${t} ${(r*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:Object.keys(H).map((t,r)=>e.jsx(re,{fill:T[r%T.length]},`cell-${r}`))}),e.jsx(ae,{}),e.jsx(se,{verticalAlign:"bottom",align:"center"})]})})]}),e.jsxs(d,{sx:{p:2,mb:3,borderRadius:2,boxShadow:3},children:[e.jsxs(a,{variant:"h6",gutterBottom:!0,sx:{color:"#3f51b5",display:"flex",alignItems:"center"},children:[e.jsx(y,{sx:{marginRight:1}}),"Upcoming Interviews"]}),L.length>0?L.map(t=>{const r=B.find(o=>o.id===t.id).job_details;return e.jsxs(l,{display:"flex",alignItems:"center",mb:2,children:[e.jsxs(l,{flex:1,children:[e.jsx(a,{variant:"body1",children:new Date(t.scheduled_time).toLocaleString()}),e.jsx(a,{variant:"body2",color:"text.secondary",children:r?r.title:"Job details not available."}),e.jsx(a,{variant:"body2",color:"text.secondary",children:t.location||"Location TBD"})]}),e.jsx(g,{component:b,to:`/job/${r?r.id:""}`,edge:"end",children:e.jsx(f,{})})]},t.id)}):e.jsx(a,{children:"No upcoming interviews."})]}),e.jsxs(d,{sx:{p:2,mb:3,borderRadius:2,boxShadow:3},children:[e.jsxs(a,{variant:"h6",gutterBottom:!0,sx:{color:"#3f51b5",display:"flex",alignItems:"center"},children:[e.jsx(F,{sx:{marginRight:1}}),"Past Interviews"]}),C.length>0?C.map(t=>{const r=B.find(G=>G.id===t.id).job_details,o=E(t.id);return e.jsxs(l,{display:"flex",alignItems:"center",mb:2,children:[e.jsxs(l,{flex:1,children:[e.jsx(a,{variant:"body1",children:new Date(t.scheduled_time).toLocaleString()}),e.jsx(a,{variant:"body2",color:"text.secondary",children:r?r.title:"Job details not available."}),e.jsx(a,{variant:"body2",color:"text.secondary",children:t.location||"Location TBD"}),o&&e.jsxs(e.Fragment,{children:[e.jsxs(a,{variant:"body2",color:"text.secondary",children:["Feedback: ",o.feedback," (Score: ",o.score,")"]}),e.jsxs(a,{variant:"body2",color:"text.secondary",children:["Stage: ",o.stage]})]})]}),e.jsx(g,{component:b,to:`/job/${r?r.id:""}`,edge:"end",children:e.jsx(f,{})})]},t.id)}):e.jsx(a,{children:"No past interviews."})]}),e.jsxs(d,{sx:{p:2,borderRadius:2,boxShadow:3},children:[e.jsxs(a,{variant:"h6",gutterBottom:!0,sx:{color:"#3f51b5",display:"flex",alignItems:"center"},children:[e.jsx(k,{sx:{marginRight:1}}),"Recent Applications History"]}),e.jsx(le,{children:x.length>0?x.map(t=>{const r=t.job_details;return e.jsxs(de,{divider:!0,children:[e.jsx(ie,{primary:`Job Title: ${r?r.title:"Job details not available."}`,secondary:`Applied on: ${new Date(t.applied_at).toLocaleDateString()}`}),e.jsx(g,{component:b,to:`/job/${t.job}`,edge:"end",children:e.jsx(f,{})})]},t.id)}):e.jsx(a,{children:"No recent applications."})})]}),e.jsxs(ce,{open:J,onClose:A,children:[e.jsx(he,{children:"Details"}),e.jsx(xe,{children:e.jsx(a,{variant:"body1",children:(j==null?void 0:j.details)||"No details available."})}),e.jsx(ue,{children:e.jsx(me,{onClick:A,color:"primary",children:"Close"})})]})]})]})]})})};export{it as default};
