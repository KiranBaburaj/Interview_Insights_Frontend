import{f as H,r as n,_ as K,j as e,I as X,b as d,ac as Z,u as ee,a as te,J as se,ad as ae,ae as re,af as oe,h as ie,ag as ne,ah as le,ai as ce,aj as de,ak as me,O as he,P as ue,M as pe}from"./index-23KSCkf2.js";import{d as xe,a as fe}from"./BookmarkBorder-DYUNgNkC.js";import{N as ve}from"./Navbar-C_TXS6Af.js";import{a as je,g as ye,s as T,u as ge,T as s,c as be,b as Se,d as p,B as k}from"./Box-XM2tYgUZ.js";import{C as Ce}from"./CircularProgress-BoXx89RB.js";import{C as w}from"./Container-gw4__q6g.js";import{T as Ae}from"./ThemeProvider-CFJv2GCe.js";import{C as ze,a as He}from"./CardContent-D8hgQBL1.js";import{B as Be}from"./Business-BUenN125.js";import{I as Le}from"./IconButton-B9EPIKEN.js";import{D as Te}from"./Divider-J8XmDzXG.js";import{G as i}from"./Grid-DwKISTRE.js";import{C as Me}from"./CalendarToday-ZX5qInfe.js";import{C as Re}from"./Chip-Y8LB4wXs.js";import{A as ke}from"./Alert-lwXFv0UO.js";import{F as _e,C as De}from"./FormControlLabel-DV34RCkP.js";import{T as Ne}from"./TextField-ChqtAR1b.js";import{B as I}from"./List-BX7Kqnf-.js";import"./ExitToApp-Cq2wJhaG.js";import"./NotificationList-CGg9UlMe.js";import"./notificationWebSocket-DO8tf4ns.js";import"./MenuItem-DkIJAbyY.js";import"./dividerClasses-CWvG6tR0.js";import"./listItemTextClasses-C2fmnH8s.js";import"./Snackbar-CAiDnlwr.js";import"./Avatar-BfffLGXU.js";import"./useSlot-mVqb9SJL.js";import"./useThemeProps-B1ZZYBGa.js";import"./Stack-BoTMgSfs.js";function Pe(m){return ye("MuiCardHeader",m)}const E=je("MuiCardHeader",["root","avatar","action","content","title","subheader"]),Ve=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],we=m=>{const{classes:r}=m;return Se({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},Pe,r)},Ie=T("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(m,r)=>H({[`& .${E.title}`]:r.title,[`& .${E.subheader}`]:r.subheader},r.root)})({display:"flex",alignItems:"center",padding:16}),Ee=T("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(m,r)=>r.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),Je=T("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(m,r)=>r.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),Ue=T("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(m,r)=>r.content})({flex:"1 1 auto"}),Fe=n.forwardRef(function(r,h){const o=ge({props:r,name:"MuiCardHeader"}),{action:f,avatar:y,className:a,component:v="div",disableTypography:A=!1,subheader:g,subheaderTypographyProps:u,title:b,titleTypographyProps:B}=o,M=K(o,Ve),S=H({},o,{component:v,disableTypography:A}),l=we(S);let x=b;x!=null&&x.type!==s&&!A&&(x=e.jsx(s,H({variant:y?"body2":"h5",className:l.title,component:"span",display:"block"},B,{children:x})));let C=g;return C!=null&&C.type!==s&&!A&&(C=e.jsx(s,H({variant:y?"body2":"body1",className:l.subheader,color:"text.secondary",component:"span",display:"block"},u,{children:C}))),e.jsxs(Ie,H({className:be(l.root,a),as:v,ref:h,ownerState:S},M,{children:[y&&e.jsx(Ee,{className:l.avatar,ownerState:S,children:y}),e.jsxs(Ue,{className:l.content,ownerState:S,children:[x,C]}),f&&e.jsx(Je,{className:l.action,ownerState:S,children:f})]}))}),We=p(e.jsx("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m2 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Assignment"),Oe=p(e.jsx("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m0 4c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3m6 12H6v-1.4c0-2 4-3.1 6-3.1s6 1.1 6 3.1z"}),"AssignmentInd"),$e=p(e.jsx("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4"}),"AttachMoney"),Ge=p(e.jsx("path",{d:"M9 11H7v2h2zm4 0h-2v2h2zm4 0h-2v2h2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V9h14z"}),"DateRange"),qe=p(e.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home"),Qe=p(e.jsx("path",{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27z"}),"Layers"),Ye=p(e.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"LocationOn"),Ke=p(e.jsx("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm-2 16-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9z"}),"VerifiedUser"),J=p(e.jsx("path",{d:"M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2m-6 0h-4V4h4z"}),"Work"),Xe=X({palette:{primary:{main:"#00796b"},secondary:{main:"#b2dfdb"},text:{primary:"#333333",secondary:"#555555"}},typography:{fontFamily:"Roboto, sans-serif",h4:{fontFamily:"Montserrat, sans-serif",fontWeight:"bold",fontSize:"1.75rem",color:"#00796b"},h6:{fontFamily:"Montserrat, sans-serif",fontWeight:"bold",fontSize:"1.25rem",color:"#333333"},body1:{fontSize:"1rem",color:"#333333"},body2:{fontSize:"0.875rem",color:"#555555"}}}),Lt=()=>{const m=d(t=>t.auth.role),r=d(t=>!!t.auth.user),{jobId:h}=Z(),o=ee(),f=te(),y=d(se),a=d(t=>ae(t,h)),v=d(t=>t.jobs.status),A=d(t=>t.jobs.error),g=d(t=>t.applications.status);d(t=>t.applications.error);const u=d(re),b=d(t=>t.profile.data),B=d(t=>t.auth.userid),[M,S]=n.useState(""),[l,x]=n.useState(!1),[C,_]=n.useState(!1),[U,z]=n.useState(!1),[L,D]=n.useState(!1),[F,W]=n.useState(null),[O,N]=n.useState({});n.useEffect(()=>{z(!1),!a&&v==="idle"&&o(oe(h)),o(ie())},[a,h,o,v]),n.useEffect(()=>{b&&b.resume&&D(!0)},[b]),n.useEffect(()=>{a&&o(ne(h))},[a,o,h,l]),n.useEffect(()=>{if(g==="failed"||u.status==="failed"){_(!0);const t=setTimeout(()=>{_(!1),o(le()),o(ce())},5e3);return()=>clearTimeout(t)}},[g,u.status,o]),n.useEffect(()=>{if(g==="succeeded"){x(!1),z(!0);const t=setTimeout(()=>z(!1),5e3);return()=>clearTimeout(t)}else z(!1)},[g]);const $=()=>{if(!r){f("/login");return}x(!0);const t=L?b.resume:F;o(de({jobId:h,resume:t,cover_letter:M,use_profile_resume:L}))},R=t=>y.some(j=>j.job===t),G=()=>{if(!r){f("/login");return}B&&a.employer&&o(me({jobseekerId:B,employerId:a.employer})).unwrap().then(()=>{f("/chat")}).catch(t=>{console.error("Failed to create chat room:",t)})},q=async t=>{if(!r){f("/login");return}N(j=>({...j,[t.id]:"loading"})),R(t.id)?await o(he(t.id)):await o(ue(t.id)),await o(pe()),N(j=>({...j,[t.id]:"idle"}))};if(v==="loading"||u.status==="loading")return e.jsx(k,{sx:{textAlign:"center",mt:4},children:e.jsx(Ce,{})});if(v==="failed")return e.jsx(k,{sx:{textAlign:"center",mt:4},children:e.jsxs(s,{color:"error",children:["Error: ",A]})});if(!a)return e.jsx(w,{maxWidth:"md",sx:{mt:4},children:e.jsx(s,{variant:"h6",color:"textSecondary",align:"center",children:"Job not found."})});const P=new Date(a.posted_at),V=new Date(a.application_deadline),Q=!isNaN(P.getTime()),Y=!isNaN(V.getTime()),c=20;return e.jsx(Ae,{theme:Xe,children:e.jsxs(w,{maxWidth:"lg",sx:{mt:4},children:[e.jsx(ve,{}),e.jsxs(ze,{elevation:4,sx:{borderRadius:2,backgroundColor:R(a.id)?"#e3f2fd":"white",transition:"background-color 0.3s","&:hover":{boxShadow:"0 4px 20px rgba(0, 0, 0, 0.1)"}},children:[e.jsx(Fe,{title:e.jsx(s,{variant:"h4",component:"span",children:a.title}),subheader:e.jsx(s,{variant:"h6",children:a.company.name}),avatar:e.jsx(Be,{fontSize:"large"}),action:m!=="employer"&&e.jsx(Le,{onClick:()=>q(a),sx:{ml:"auto"},disabled:O[a.id]==="loading",children:R(a.id)?e.jsx(xe,{color:"primary"}):e.jsx(fe,{})})}),e.jsx(Te,{}),e.jsx(He,{children:e.jsxs(i,{container:!0,spacing:2,children:[e.jsxs(i,{item:!0,xs:12,children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Job Description"}),e.jsx(s,{variant:"body1",children:a.description})]}),e.jsxs(i,{item:!0,xs:12,sm:6,children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,children:[e.jsx(Me,{sx:{verticalAlign:"middle",fontSize:c}}),"Posted on:"]}),e.jsx(s,{variant:"body1",color:"textSecondary",children:Q?P.toLocaleDateString():"Invalid date"})]}),e.jsxs(i,{item:!0,xs:12,sm:6,children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,children:[e.jsx(Ge,{sx:{verticalAlign:"middle",fontSize:c}}),"Application Deadline:"]}),e.jsx(s,{variant:"body1",color:"textSecondary",children:Y?V.toLocaleDateString():"Invalid date"})]}),e.jsxs(i,{item:!0,xs:12,sm:6,children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,children:[e.jsx(Ye,{sx:{verticalAlign:"middle",fontSize:c}}),"Location:"]}),e.jsx(s,{variant:"body1",color:"textSecondary",children:a.location})]}),e.jsxs(i,{item:!0,xs:12,sm:6,children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,children:[e.jsx($e,{sx:{verticalAlign:"middle",fontSize:c}}),"Salary:"]}),e.jsxs(s,{variant:"body1",color:"textSecondary",children:[a.salary_min.toLocaleString()," - ",a.salary_max.toLocaleString()]})]}),e.jsxs(i,{item:!0,xs:12,sm:6,children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,children:[e.jsx(We,{sx:{verticalAlign:"middle",fontSize:c}}),"Responsibilities:"]}),e.jsx(s,{variant:"body1",color:"textSecondary",children:a.responsibilities})]}),e.jsxs(i,{item:!0,xs:12,children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,children:[e.jsx(Ke,{sx:{verticalAlign:"middle",fontSize:c}}),"Qualifications:"]}),e.jsx(s,{variant:"body1",color:"textSecondary",children:a.qualifications})]}),e.jsxs(i,{item:!0,xs:12,children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,children:[e.jsx(Oe,{sx:{verticalAlign:"middle",fontSize:c}}),"Nice to Have:"]}),e.jsx(s,{variant:"body1",color:"textSecondary",children:a.nice_to_have})]}),e.jsxs(i,{item:!0,xs:12,children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,children:[e.jsx(J,{sx:{verticalAlign:"middle",fontSize:c}}),"Employment Type:"]}),e.jsx(s,{variant:"body1",color:"textSecondary",children:a.employment_type})]}),e.jsxs(i,{item:!0,xs:12,children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,children:[e.jsx(Qe,{sx:{verticalAlign:"middle",fontSize:c}}),"Experience Level:"]}),e.jsx(s,{variant:"body1",color:"textSecondary",children:a.experience_level})]}),e.jsxs(i,{item:!0,xs:12,children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,children:[e.jsx(J,{sx:{verticalAlign:"middle",fontSize:c}}),"Job Function:"]}),e.jsx(s,{variant:"body1",color:"textSecondary",children:a.job_function})]}),e.jsxs(i,{item:!0,xs:12,children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,children:[e.jsx(qe,{sx:{verticalAlign:"middle",fontSize:c}}),"Remote:"]}),e.jsx(s,{variant:"body1",color:"textSecondary",children:a.is_remote?"Yes":"No"})]}),a.skills&&a.skills.length>0&&e.jsxs(i,{item:!0,xs:12,children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Skills:"}),a.skills.map((t,j)=>e.jsx(Re,{label:t,sx:{mr:1,mb:1}},j))]}),e.jsxs(i,{item:!0,xs:12,children:[U&&e.jsx(ke,{severity:"success",onClose:()=>z(!1),children:"Application submitted successfully!"}),e.jsx(_e,{control:e.jsx(De,{checked:L,onChange:t=>D(t.target.checked),disabled:l||u.hasApplied}),label:"Use profile resume"}),!L&&e.jsx(Ne,{type:"file",onChange:t=>W(t.target.files[0]),disabled:l||u.hasApplied,sx:{mt:2}}),e.jsxs(k,{sx:{mt:2},children:[e.jsx(I,{variant:"contained",color:"primary",onClick:$,disabled:l||u.hasApplied,sx:{mr:2},children:u.hasApplied?"Already Applied":"Apply Now"}),e.jsx(I,{variant:"contained",color:"secondary",onClick:G,children:"Chat with Employer"})]})]})]})})]})]})})};export{Lt as default};
