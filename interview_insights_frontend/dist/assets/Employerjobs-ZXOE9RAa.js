import{r as x,_ as ce,j as e,f as $,I as de,u as me,a as ue,b as y,T as pe,U as he,k as xe,V as ge,W as ye,m as be,X as U,Y as fe,Z as ve,$ as je,a0 as Ce}from"./index-7-2mgnDc.js";import{E as _e}from"./EmployerNavbar-BOGE7jhy.js";import{g as Se,a as ke,s as we,T as i,n as De,u as Ee,c as Te,b as Je,B as u}from"./Box-CTjzldOl.js";import{C as Ae}from"./CircularProgress-YnoFKpnV.js";import{T as We}from"./ThemeProvider-FnM7MbRd.js";import{P as Fe}from"./List-x0N1r-mi.js";import{B as o}from"./Button-DBV7v9Jq.js";import{T as m,F as C,I as _,S}from"./TextField-BrNPR9uc.js";import{M as k}from"./MenuItem-C62xmuNb.js";import{F as qe,C as Me}from"./FormControlLabel-Dlvc63x8.js";import{C as O}from"./Chip-CQdVyB7U.js";import{L as B,C as Pe}from"./ListItemText-DbOemeAA.js";import{D as H,a as Y,b as Q}from"./DialogContent-BivN1rae.js";import{D as X}from"./DialogTitle-DYaf8eWc.js";import"./ExitToApp-Bj4CSGd-.js";import"./Business-CvMi5PZV.js";import"./NotificationList--NPEsJ9e.js";import"./notificationWebSocket-C-54nP-w.js";import"./IconButton-Cr1Dw-hb.js";import"./Snackbar-Bz-1khUd.js";import"./useMediaQuery-D6MqTMK-.js";import"./useThemeProps-DKLb6pSW.js";import"./Divider-DNQaKhKR.js";import"./dividerClasses-CwC1-alD.js";import"./Avatar-CD2s688e.js";import"./useSlot-tFV6G7mG.js";import"./ListItem-C5xdFMiH.js";import"./listItemTextClasses-Cv48EgxI.js";import"./Stack-BjPc0q-u.js";function Ne(n){return Se("MuiDialogContentText",n)}ke("MuiDialogContentText",["root"]);const Le=["children","className"],Re=n=>{const{classes:b}=n,p=Je({root:["root"]},Ne,b);return $({},b,p)},Ie=we(i,{shouldForwardProp:n=>De(n)||n==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(n,b)=>b.root})({}),Ve=x.forwardRef(function(b,t){const p=Ee({props:b,name:"MuiDialogContentText"}),{className:f}=p,v=ce(p,Le),g=Re(v);return e.jsx(Ie,$({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:v,className:Te(g.root,f)},p,{classes:g}))}),Ue=[{value:"Full-time",label:"Full-time"},{value:"Part-time",label:"Part-time"},{value:"Contract",label:"Contract"},{value:"Temporary",label:"Temporary"},{value:"Internship",label:"Internship"},{value:"Freelance",label:"Freelance"}],Oe=[{value:"Entry level",label:"Entry level"},{value:"Mid level",label:"Mid level"},{value:"Senior level",label:"Senior level"},{value:"Executive",label:"Executive"}],Be=de({palette:{primary:{main:"#00796b"},secondary:{main:"#b2dfdb"},text:{primary:"#212121",secondary:"#757575"}},typography:{fontFamily:"Roboto, sans-serif",h4:{fontFamily:"Montserrat, sans-serif",fontWeight:"bold"},h6:{fontFamily:"Montserrat, sans-serif",fontWeight:"bold"}}}),He=()=>{const n=me(),b=ue(),[t,p]=x.useState({id:null,title:"",description:"",responsibilities:"",qualifications:"",nice_to_have:"",employment_type:"",location:"",salary_min:"",salary_max:"",is_remote:!1,application_deadline:"",experience_level:"",job_function:"",categories:[],skills_required:[],status:"open"}),{userid:f}=y(a=>a.auth);console.log(f),y(a=>a.auth);const[v,g]=x.useState(!1),[w,q]=x.useState(""),[D,M]=x.useState(""),[P,h]=x.useState(null),[G,E]=x.useState(!1),[s,Z]=x.useState(null),[N,j]=x.useState(!1),L=y(pe),T=y(he),R=y(a=>a.jobCategories.status),z=y(a=>a.jobCategories.error),J=y(xe);console.log(J);const I=y(a=>a.jobs.status);x.useEffect(()=>{n(ge()),n(ye()),n(be())},[n,N,v]);const c=a=>{const{name:l,value:r,type:d,checked:W}=a.target;p({...t,[l]:d==="checkbox"?W:r})},K=a=>{const{value:l}=a.target,r=L.filter(d=>l.includes(d.id)).map(d=>({category:d.name}));p({...t,categories:r})},ee=a=>{const{value:l}=a.target,r=T.filter(d=>l.includes(d.id));p({...t,skills_required:r})},ae=a=>{if(a.preventDefault(),h(null),!f){console.error("User data is missing or incomplete"),h("User data is missing. Please try logging in again.");return}const l={...t,employer:f};t.id?n(U({jobId:t.id,jobData:l})).unwrap().then(()=>{V(),j(!1)}).catch(r=>h(r.message||"An error occurred while updating the job.")):n(fe(l)).unwrap().then(()=>{V(),j(!1)}).catch(r=>h(r.message||"An error occurred while adding the job."))},V=()=>{p({id:null,title:"",description:"",responsibilities:"",qualifications:"",nice_to_have:"",employment_type:"",location:"",salary_min:"",salary_max:"",is_remote:!1,application_deadline:"",experience_level:"",job_function:"",categories:[],skills_required:[],status:"open"})},te=a=>{p({id:a.id,title:a.title,description:a.description,responsibilities:a.responsibilities,qualifications:a.qualifications,nice_to_have:a.nice_to_have,employment_type:a.employment_type,location:a.location,salary_min:a.salary_min,salary_max:a.salary_max,is_remote:a.is_remote,application_deadline:a.application_deadline,experience_level:a.experience_level,job_function:a.job_function,categories:a.categories.map(l=>({category:l.name})),skills_required:a.skills_required,status:a.status}),j(!0)},ie=a=>{n(ve(a)).unwrap().catch(l=>h(l.message||"An error occurred while deleting the job."))},ne=a=>{Z(a),E(!0)},le=()=>{if(w.trim()===""){h("Category name cannot be empty");return}n(je({name:w})).unwrap().then(()=>{g(!1),q("")}).catch(a=>h(a.message||"An error occurred while adding the category."))},se=()=>{if(D.trim()===""){h("Skill name cannot be empty");return}n(Ce({name:D})).unwrap().then(()=>{g(!1),M("")}).catch(a=>h(a.message||"An error occurred while adding the skill."))},re=a=>{b(`/EmployerJobapplicants/${a}`)},oe=(a,l)=>{const r=l==="open"?"closed":"open",d=J.find(F=>F.id===a);if(!d){h("Job not found.");return}const W={...d,status:r};n(U({jobId:a,jobData:W})).unwrap().then(()=>{}).catch(F=>h(F.message||"An error occurred while updating the job status."))},A=J.filter(a=>a.employer==f).sort((a,l)=>a.status==="open"?-1:1);return console.log(A),R==="loading"||I==="loading"?e.jsx(u,{sx:{textAlign:"center",mt:4},children:e.jsx(Ae,{})}):R==="failed"||I==="failed"?e.jsx(u,{sx:{textAlign:"center",mt:4},children:e.jsxs(i,{color:"error",children:["Error: ",z||"Failed to load jobs."]})}):e.jsx(We,{theme:Be,children:e.jsxs(u,{sx:{mt:4},children:[e.jsxs(Fe,{elevation:3,sx:{p:4},children:[e.jsx(i,{variant:"h4",gutterBottom:!0,children:"Job Management"}),e.jsxs(u,{sx:{mb:2},children:[e.jsx(o,{variant:"contained",color:"primary",onClick:()=>j(!0),sx:{mr:1},children:"Create Job"}),e.jsx(o,{variant:"contained",color:"secondary",onClick:()=>g(!0),children:"Add Category"}),e.jsx(o,{variant:"contained",color:"secondary",onClick:()=>g(!0),sx:{ml:1},children:"Add Skill"})]}),N&&e.jsxs(u,{component:"form",onSubmit:ae,sx:{mx:"auto",maxWidth:600},children:[P&&e.jsx(i,{color:"error",children:P}),e.jsx(m,{fullWidth:!0,margin:"normal",label:"Job Title",name:"title",value:t.title,onChange:c,required:!0}),e.jsx(m,{fullWidth:!0,margin:"normal",label:"Job Description",name:"description",value:t.description,onChange:c,required:!0,multiline:!0,rows:4}),e.jsx(m,{fullWidth:!0,margin:"normal",label:"Responsibilities",name:"responsibilities",value:t.responsibilities,onChange:c,multiline:!0,rows:4}),e.jsx(m,{fullWidth:!0,margin:"normal",label:"Qualifications",name:"qualifications",value:t.qualifications,onChange:c,multiline:!0,rows:4}),e.jsx(m,{fullWidth:!0,margin:"normal",label:"Nice to Have",name:"nice_to_have",value:t.nice_to_have,onChange:c,multiline:!0,rows:4}),e.jsxs(C,{fullWidth:!0,margin:"normal",children:[e.jsx(_,{children:"Employment Type"}),e.jsx(S,{name:"employment_type",value:t.employment_type,onChange:c,required:!0,children:Ue.map(a=>e.jsx(k,{value:a.value,children:a.label},a.value))})]}),e.jsx(m,{fullWidth:!0,margin:"normal",label:"Location",name:"location",value:t.location,onChange:c}),e.jsx(m,{fullWidth:!0,margin:"normal",label:"Salary Min",name:"salary_min",value:t.salary_min,onChange:c,type:"number"}),e.jsx(m,{fullWidth:!0,margin:"normal",label:"Salary Max",name:"salary_max",value:t.salary_max,onChange:c,type:"number"}),e.jsx(qe,{control:e.jsx(Me,{checked:t.is_remote,onChange:c,name:"is_remote"}),label:"Remote"}),e.jsx(m,{fullWidth:!0,margin:"normal",label:"Application Deadline",name:"application_deadline",value:t.application_deadline,onChange:c,type:"date",InputLabelProps:{shrink:!0},inputProps:{min:new Date().toISOString().split("T")[0]}}),e.jsxs(C,{fullWidth:!0,margin:"normal",children:[e.jsx(_,{children:"Experience Level"}),e.jsx(S,{name:"experience_level",value:t.experience_level,onChange:c,required:!0,children:Oe.map(a=>e.jsx(k,{value:a.value,children:a.label},a.value))})]}),e.jsx(m,{fullWidth:!0,margin:"normal",label:"Job Function",name:"job_function",value:t.job_function,onChange:c}),e.jsxs(C,{fullWidth:!0,margin:"normal",children:[e.jsx(_,{children:"Categories"}),e.jsx(S,{multiple:!0,value:t.categories.map(a=>a.category),onChange:K,renderValue:a=>e.jsx(u,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:a.map(l=>e.jsx(O,{label:l},l))}),children:L.map(a=>e.jsx(k,{value:a.id,children:e.jsx(B,{primary:a.name})},a.id))})]}),e.jsxs(C,{fullWidth:!0,margin:"normal",children:[e.jsx(_,{children:"Required Skills"}),e.jsx(S,{multiple:!0,value:t.skills_required.map(a=>a.id),onChange:ee,renderValue:a=>e.jsx(u,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:a.map(l=>{var r;return e.jsx(O,{label:(r=T.find(d=>d.id===l))==null?void 0:r.name},l)})}),children:T.map(a=>e.jsx(k,{value:a.id,children:e.jsx(B,{primary:a.name})},a.id))})]}),e.jsx(o,{type:"submit",variant:"contained",color:"primary",sx:{mt:2},children:t.id?"Update Job":"Create Job"}),e.jsx(o,{variant:"contained",color:"secondary",onClick:()=>j(!1),sx:{ml:1,mt:2},children:"Cancel"})]}),e.jsxs(u,{sx:{mt:4},children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Job Listings"}),A.length===0?e.jsx(i,{children:"No jobs available"}):A.map(a=>e.jsxs(u,{sx:{mb:2,border:"1px solid #ddd",borderRadius:1,p:2},children:[e.jsx(i,{variant:"h6",children:a.title}),e.jsx(i,{variant:"body2",children:a.description}),e.jsxs(i,{variant:"body2",children:["Status: ",a.status]}),e.jsx(o,{variant:"contained",color:"info",onClick:()=>oe(a.id,a.status),sx:{mr:1},children:a.status==="open"?"Close Job":"Open Job"}),e.jsxs(u,{sx:{mt:1},children:[e.jsx(o,{variant:"contained",color:"primary",onClick:()=>te(a),sx:{mr:1},children:"Edit"}),e.jsx(o,{variant:"contained",color:"error",onClick:()=>ie(a.id),sx:{mr:1},children:"Delete"}),e.jsx(o,{variant:"contained",color:"info",onClick:()=>re(a.id),children:"View Applicants"}),e.jsx(o,{variant:"contained",color:"secondary",onClick:()=>ne(a),children:"View Job"})]})]},a.id))]})]}),e.jsxs(H,{open:v,onClose:()=>g(!1),children:[e.jsx(X,{children:"Add Category or Skill"}),e.jsxs(Y,{children:[e.jsx(Ve,{children:"Enter the name of the new category or skill."}),e.jsx(m,{autoFocus:!0,margin:"dense",label:"Category Name",type:"text",fullWidth:!0,variant:"standard",value:w,onChange:a=>q(a.target.value)}),e.jsx(m,{margin:"dense",label:"Skill Name",type:"text",fullWidth:!0,variant:"standard",value:D,onChange:a=>M(a.target.value)})]}),e.jsxs(Q,{children:[e.jsx(o,{onClick:()=>g(!1),children:"Cancel"}),e.jsx(o,{onClick:le,children:"Add Category"}),e.jsx(o,{onClick:se,children:"Add Skill"})]})]}),e.jsxs(H,{open:G,onClose:()=>E(!1),children:[e.jsx(X,{children:"View Job"}),e.jsx(Y,{children:s&&e.jsxs(e.Fragment,{children:[e.jsx(i,{variant:"h6",children:s.title}),e.jsx(i,{variant:"body2",children:s.description}),e.jsxs(i,{variant:"body2",children:["Responsibilities: ",s.responsibilities]}),e.jsxs(i,{variant:"body2",children:["Qualifications: ",s.qualifications]}),e.jsxs(i,{variant:"body2",children:["Nice to Have: ",s.nice_to_have]}),e.jsxs(i,{variant:"body2",children:["Employment Type: ",s.employment_type]}),e.jsxs(i,{variant:"body2",children:["Location: ",s.location]}),e.jsxs(i,{variant:"body2",children:["Salary: ",s.salary_min," - ",s.salary_max]}),e.jsxs(i,{variant:"body2",children:["Remote: ",s.is_remote?"Yes":"No"]}),e.jsxs(i,{variant:"body2",children:["Application Deadline: ",s.application_deadline]}),e.jsxs(i,{variant:"body2",children:["Experience Level: ",s.experience_level]}),e.jsxs(i,{variant:"body2",children:["Job Function: ",s.job_function]}),e.jsxs(i,{variant:"body2",children:["Categories: ",s.categories.map(a=>a.category).join(", ")]}),e.jsxs(i,{variant:"body2",children:["Required Skills: ",s.skills_required.map(a=>a.name).join(", ")]})]})}),e.jsx(Q,{children:e.jsx(o,{onClick:()=>E(!1),children:"Close"})})]})]})})},ja=()=>(y(n=>n.auth),e.jsxs(u,{sx:{display:"flex",height:"100vh"},children:[e.jsx(Pe,{}),e.jsx(_e,{}),e.jsx(u,{sx:{flexGrow:1,p:2},children:e.jsx(He,{})})]}));export{ja as default};
