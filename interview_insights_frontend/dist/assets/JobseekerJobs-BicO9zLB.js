import{a as B,u as L,b as a,r as d,av as R,aw as J,ax as N,j as e,ah as M}from"./index-ByHWvs_7.js";import{J as P}from"./JobseekerNavbar-CHp2K5Xh.js";import{d as z}from"./Search-CA1JDZ0Q.js";import{d as H}from"./FilterList-BGFEJQ_H.js";import{B as l,T as o}from"./Box-C-Fy6sNV.js";import{C as $}from"./CircularProgress-BKZKZNHa.js";import{C as G}from"./Container-VJOY0SUn.js";import{C as O,a as U}from"./CardContent-BdG---IU.js";import{T as W,S as q}from"./TextField-DSZbuARI.js";import{M as n}from"./MenuItem-B_mrHzCT.js";import{I as K}from"./IconButton-DBUOCyEy.js";import{D as Q}from"./Divider-BC8QZEnC.js";import{T as V,a as X,b as Y,c as b,d as s,e as Z}from"./TableRow-BnsfYgyk.js";import{P as ee}from"./List-BQw4DwJY.js";import{A as te}from"./Avatar-Cm1gniT-.js";import{C as se}from"./Chip-QRp_zc-O.js";import{B as w}from"./Button-CY8D8cZw.js";import{C as re}from"./ListItemText-B93-dYqh.js";import{T as ie}from"./ExitToApp-Db8FtkN4.js";import"./NotificationList-BHaXWlFn.js";import"./notificationWebSocket-BTWUOPo5.js";import"./Snackbar-lV7gC8LU.js";import"./useMediaQuery-BY-xwriP.js";import"./useThemeProps-DJ9Mi4tJ.js";import"./ListItem-Bj7idu-S.js";import"./dividerClasses-BeSUqKOT.js";import"./listItemTextClasses-CCYEooyd.js";import"./useSlot-Bw0hv-xe.js";const ae=()=>{const C=B(),c=L(),j=a(t=>t.myapplications.applications),f=a(t=>t.myapplications.status),y=a(t=>t.myapplications.error),h=a(t=>t.interviews.interviews),v=a(t=>t.interviews.status),g=a(t=>t.interviews.error),p=a(t=>t.interviews.currentFeedback),S=a(t=>t.auth.userid),[u,A]=d.useState(""),[T,_]=d.useState(j),[m,k]=d.useState("");d.useEffect(()=>{c(R()),c(J()),h.length>0&&h.forEach(t=>{c(N(t.id))})},[c,h.length]),d.useEffect(()=>{let t=j;m&&(t=t.filter(r=>r.status===m)),t=t.filter(r=>r.job_details.company.name.toLowerCase().includes(u.toLowerCase())||r.job_details.title.toLowerCase().includes(u.toLowerCase())),_(t)},[u,j,m]);const F=(t,r)=>{t&&r&&c(M({jobseekerId:t,employerId:r})).unwrap().then(()=>{C("/chat")}).catch(i=>{console.error("Failed to create chat room:",i)})},I=t=>{window.open(`${t}`,"_blank")},D=t=>h.find(r=>r.job_application===t),E=t=>p&&p.interview_schedule===t?p:null;return f==="loading"||v==="loading"?e.jsx(l,{sx:{textAlign:"center",mt:4},children:e.jsx($,{})}):f==="failed"||v==="failed"?e.jsx(l,{sx:{textAlign:"center",mt:4},children:e.jsxs(o,{color:"error",children:["Error: ",y||g]})}):e.jsxs(G,{maxWidth:"lg",sx:{mt:4},children:[e.jsx(o,{variant:"h4",children:"My Applications"}),e.jsx(O,{sx:{mt:2,mb:2},children:e.jsx(U,{})}),e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",my:2},children:[e.jsx(W,{placeholder:"Search Jobs",variant:"outlined",size:"small",sx:{mr:2},InputProps:{startAdornment:e.jsx(z,{})},onChange:t=>A(t.target.value)}),e.jsxs(q,{value:m,onChange:t=>k(t.target.value),displayEmpty:!0,variant:"outlined",size:"small",sx:{mr:2},children:[e.jsx(n,{value:"",children:e.jsx("em",{children:"All Status"})}),e.jsx(n,{value:"applied",children:"Applied"}),e.jsx(n,{value:"reviewed",children:"Reviewed"}),e.jsx(n,{value:"interview_scheduled",children:"Interview Scheduled"}),e.jsx(n,{value:"interviewed",children:"Interviewed"}),e.jsx(n,{value:"offered",children:"Offered"}),e.jsx(n,{value:"hired",children:"Hired"}),e.jsx(n,{value:"rejected",children:"Rejected"})]}),e.jsx(K,{children:e.jsx(H,{})})]}),e.jsx(Q,{}),e.jsx(V,{component:ee,children:e.jsxs(X,{children:[e.jsx(Y,{children:e.jsxs(b,{children:[e.jsx(s,{children:"#"}),e.jsx(s,{children:"Company Name"}),e.jsx(s,{children:"Roles"}),e.jsx(s,{children:"Date Applied"}),e.jsx(s,{children:"Status"}),e.jsx(s,{children:"Interview"}),e.jsx(s,{children:"Feedback"}),e.jsx(s,{children:"Action"}),e.jsx(s,{children:"Chat"})]})}),e.jsx(Z,{children:T.map((t,r)=>{const i=D(t.id),x=i?E(i.id):null;return e.jsxs(b,{children:[e.jsx(s,{children:r+1}),e.jsx(s,{children:e.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(te,{src:t.job_details.company.logoUrl,alt:t.job_details.company.name,sx:{mr:2}}),t.job_details.company.name]})}),e.jsx(s,{children:t.job_details.title}),e.jsx(s,{children:new Date(t.applied_at).toLocaleDateString()}),e.jsx(s,{children:e.jsx(se,{label:t.status})}),e.jsx(s,{children:i?e.jsxs(l,{children:[e.jsxs(o,{variant:"body2",children:[new Date(i.scheduled_time).toLocaleDateString()," at ",new Date(i.scheduled_time).toLocaleTimeString()]}),e.jsx(o,{variant:"body2",children:i.location})]}):"No Interview Scheduled"}),e.jsx(s,{children:x?e.jsxs(l,{children:[e.jsxs(o,{variant:"body2",children:["Score: ",x.score]}),e.jsxs(o,{variant:"body2",children:["Feedback: ",x.feedback]}),e.jsxs(o,{variant:"body2",children:["Stage: ",x.stage]})]}):"No Feedback Available"}),e.jsx(s,{children:e.jsx(w,{variant:"outlined",onClick:()=>I(t.resume),children:"See Application"})}),e.jsx(s,{children:e.jsx(w,{onClick:()=>F(S,t.job_details.employer),children:"Chat"})})]},t.id)})})]})})]})},Le=()=>e.jsxs(l,{sx:{display:"flex"},children:[e.jsx(re,{}),e.jsx(P,{}),e.jsxs(l,{component:"main",sx:{flexGrow:1,p:3,width:{sm:"calc(100% - 240px)"}},children:[e.jsx(ie,{}),e.jsx(o,{variant:"h4",component:"h1",gutterBottom:!0}),e.jsx(ae,{})]})]});export{Le as default};
