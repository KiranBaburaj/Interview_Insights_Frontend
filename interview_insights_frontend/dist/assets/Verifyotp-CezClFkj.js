import{r as a,u as b,a as A,b as E,j as e,c as o,v as f,e as I}from"./index-DKDud9B3.js";import{C as V}from"./Container-DnAEw0dP.js";import{B as n,T as x}from"./Box-DeexiNaH.js";import{A as w}from"./Avatar-Bh4Qm1IL.js";import{P as R}from"./List-BQoz8thZ.js";import{T as W}from"./TextField-mom891MJ.js";import{B as g}from"./Button-lWvZ9Ue1.js";import{C as j}from"./CircularProgress-x8iVjb9v.js";import{S as B}from"./Snackbar-BuGiu26o.js";import{A as z}from"./Alert-DsjU4H_z.js";import{A as D}from"./AlertTitle-CtMz_PpD.js";import"./useThemeProps-B309zX7t.js";import"./useSlot-Bqi3Roj4.js";import"./IconButton-CpFqPupq.js";const Z=()=>{const[i,v]=a.useState(""),r=b(),T=A(),{loading:l,error:s}=E(t=>t.auth),[P,c]=a.useState(!1),[m,d]=a.useState(!1),[u,h]=a.useState(!1),y=t=>{v(t.target.value)},O=async t=>{t.preventDefault(),d(!0),r(o());const S=await r(f({otp:i}));f.fulfilled.match(S)?T("/login"):c(!0),d(!1)},p=()=>{c(!1),r(o())},C=async()=>{const t=localStorage.getItem("user_id");t&&(h(!0),r(o()),await r(I({user_id:t})),h(!1))};return e.jsxs(V,{component:"main",maxWidth:"xs",children:[e.jsxs(n,{sx:{mt:8,textAlign:"center"},children:[e.jsx(w,{src:"/logo.PNG",sx:{width:56,height:56,margin:"auto"}}),e.jsx(x,{component:"h1",variant:"h5",sx:{mt:2},children:"Welcome to Interview Insights"})]}),e.jsx(n,{sx:{mt:2},children:e.jsxs(R,{elevation:3,sx:{p:4},children:[e.jsx(x,{component:"h1",variant:"h5",align:"center",children:"Verify OTP"}),e.jsxs(n,{component:"form",onSubmit:O,sx:{mt:1},children:[e.jsx(W,{margin:"normal",required:!0,fullWidth:!0,id:"otp",label:"Enter OTP",name:"otp",value:i,onChange:y}),e.jsx(g,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:m||l,children:m?e.jsx(j,{size:24}):"Verify OTP"})]}),e.jsx(g,{fullWidth:!0,variant:"outlined",sx:{mt:1},onClick:C,disabled:u||l,children:u?e.jsx(j,{size:24}):"Resend OTP"})]})}),e.jsx(B,{open:P,autoHideDuration:5e3,onClose:p,anchorOrigin:{vertical:"top",horizontal:"left"},children:e.jsxs(z,{onClose:p,severity:"error",sx:{width:"100%"},children:[e.jsx(D,{children:"Error"}),s!=null&&s.error?s.error:""]})})]})};export{Z as default};
