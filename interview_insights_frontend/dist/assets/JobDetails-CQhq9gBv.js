import{f as z,r as n,_ as K,j as e,I as X,b as d,a9 as Z,u as ee,a as te,J as se,aa as ae,ab as re,ac as oe,h as ie,ad as ne,ae as le,af as ce,ag as de,ah as me,O as he,P as pe,M as ue}from"./index-DZZwBIMF.js";import{d as xe,a as fe}from"./BookmarkBorder-ae4xpwv4.js";import{N as ve}from"./Navbar-DfsiJKwI.js";import{a as je,g as ye,s as L,u as ge,T as s,c as be,b as Se,d as u,B as _}from"./Box-L8YP_HMF.js";import{C as Ce}from"./CircularProgress-eM9RSNjE.js";import{C as V}from"./Container-Cr9VzHPC.js";import{T as Ae}from"./ThemeProvider-BnVlN9RE.js";import{C as ze,a as He}from"./CardContent-BAg5BniL.js";import{B as Be}from"./Business-SFN-V-Kd.js";import{I as Le}from"./IconButton-CZIn7WCe.js";import{D as Te}from"./Divider-Bp6PTbT_.js";import{G as i}from"./Grid-DQUS7JwF.js";import{C as Me}from"./CalendarToday-OBYbE0pB.js";import{C as Re}from"./Chip-CeekdFvG.js";import{A as _e}from"./Alert-Kv9-bRK9.js";import{F as ke,C as De}from"./FormControlLabel-BLa-DCbq.js";import{T as Ne}from"./TextField-_N8teEsA.js";import{B as w}from"./Button-Ll0b2T1T.js";import"./ExitToApp-_kaibx0O.js";import"./List-CtAuu3yH.js";import"./NotificationList-CA1bZWtm.js";import"./notificationWebSocket-LyXQ8B2b.js";import"./MenuItem-yJCxavGA.js";import"./dividerClasses-eAm5yYW3.js";import"./listItemTextClasses-CttmerGt.js";import"./Snackbar-tcWgl1Rl.js";import"./Avatar-fOBMrlj7.js";import"./useSlot-UeOSS_S4.js";import"./useThemeProps-qMM10Wk6.js";import"./Stack-CmfYJ9AG.js";function Pe(m){return ye("MuiCardHeader",m)}const I=je("MuiCardHeader",["root","avatar","action","content","title","subheader"]),Ve=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],we=m=>{const{classes:r}=m;return Se({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},Pe,r)},Ie=L("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(m,r)=>z({[`& .${I.title}`]:r.title,[`& .${I.subheader}`]:r.subheader},r.root)})({display:"flex",alignItems:"center",padding:16}),Je=L("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(m,r)=>r.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),Ee=L("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(m,r)=>r.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),Ue=L("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(m,r)=>r.content})({flex:"1 1 auto"}),Fe=n.forwardRef(function(r,h){const o=ge({props:r,name:"MuiCardHeader"}),{action:f,avatar:y,className:a,component:v="div",disableTypography:C=!1,subheader:g,subheaderTypographyProps:p,title:T,titleTypographyProps:H}=o,M=K(o,Ve),b=z({},o,{component:v,disableTypography:C}),l=we(b);let x=T;x!=null&&x.type!==s&&!C&&(x=e.jsx(s,z({variant:y?"body2":"h5",className:l.title,component:"span",display:"block"},H,{children:x})));let S=g;return S!=null&&S.type!==s&&!C&&(S=e.jsx(s,z({variant:y?"body2":"body1",className:l.subheader,color:"text.secondary",component:"span",display:"block"},p,{children:S}))),e.jsxs(Ie,z({className:be(l.root,a),as:v,ref:h,ownerState:b},M,{children:[y&&e.jsx(Je,{className:l.avatar,ownerState:b,children:y}),e.jsxs(Ue,{className:l.content,ownerState:b,children:[x,S]}),f&&e.jsx(Ee,{className:l.action,ownerState:b,children:f})]}))}),We=u(e.jsx("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m2 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Assignment"),Oe=u(e.jsx("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m0 4c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3m6 12H6v-1.4c0-2 4-3.1 6-3.1s6 1.1 6 3.1z"}),"AssignmentInd"),$e=u(e.jsx("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4"}),"AttachMoney"),Ge=u(e.jsx("path",{d:"M9 11H7v2h2zm4 0h-2v2h2zm4 0h-2v2h2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V9h14z"}),"DateRange"),qe=u(e.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home"),Qe=u(e.jsx("path",{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27z"}),"Layers"),Ye=u(e.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"LocationOn"),Ke=u(e.jsx("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm-2 16-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9z"}),"VerifiedUser"),J=u(e.jsx("path",{d:"M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2m-6 0h-4V4h4z"}),"Work"),Xe=X({palette:{primary:{main:"#00796b"},secondary:{main:"#b2dfdb"},text:{primary:"#333333",secondary:"#555555"}},typography:{fontFamily:"Roboto, sans-serif",h4:{fontFamily:"Montserrat, sans-serif",fontWeight:"bold",fontSize:"1.75rem",color:"#00796b"},h6:{fontFamily:"Montserrat, sans-serif",fontWeight:"bold",fontSize:"1.25rem",color:"#333333"},body1:{fontSize:"1rem",color:"#333333"},body2:{fontSize:"0.875rem",color:"#555555"}}}),Tt=()=>{const m=d(t=>t.auth.role),r=d(t=>!!t.auth.user),{jobId:h}=Z(),o=ee(),f=te(),y=d(se),a=d(t=>ae(t,h)),v=d(t=>t.jobs.status),C=d(t=>t.jobs.error),g=d(t=>t.applications.status);d(t=>t.applications.error);const p=d(re),T=d(t=>t.profile.data),H=d(t=>t.auth.userid),[M,b]=n.useState(""),[l,x]=n.useState(!1),[S,k]=n.useState(!1),[E,A]=n.useState(!1),[B,U]=n.useState(!0),[F,W]=n.useState(null),[O,D]=n.useState({});n.useEffect(()=>{A(!1),!a&&v==="idle"&&o(oe(h)),o(ie())},[a,h,o,v]),n.useEffect(()=>{a&&o(ne(h))},[a,o,h,l]),n.useEffect(()=>{if(g==="failed"||p.status==="failed"){k(!0);const t=setTimeout(()=>{k(!1),o(le()),o(ce())},5e3);return()=>clearTimeout(t)}},[g,p.status,o]),n.useEffect(()=>{if(g==="succeeded"){x(!1),A(!0);const t=setTimeout(()=>A(!1),5e3);return()=>clearTimeout(t)}else A(!1)},[g]);const $=()=>{if(!r){f("/login");return}x(!0);const t=B?T.resume:F;o(de({jobId:h,resume:t,cover_letter:M,use_profile_resume:B}))},R=t=>y.some(j=>j.job===t),G=()=>{if(!r){f("/login");return}H&&a.employer&&o(me({jobseekerId:H,employerId:a.employer})).unwrap().then(()=>{f("/chat")}).catch(t=>{console.error("Failed to create chat room:",t)})},q=async t=>{if(!r){f("/login");return}D(j=>({...j,[t.id]:"loading"})),R(t.id)?await o(he(t.id)):await o(pe(t.id)),await o(ue()),D(j=>({...j,[t.id]:"idle"}))};if(v==="loading"||p.status==="loading")return e.jsx(_,{sx:{textAlign:"center",mt:4},children:e.jsx(Ce,{})});if(v==="failed")return e.jsx(_,{sx:{textAlign:"center",mt:4},children:e.jsxs(s,{color:"error",children:["Error: ",C]})});if(!a)return e.jsx(V,{maxWidth:"md",sx:{mt:4},children:e.jsx(s,{variant:"h6",color:"textSecondary",align:"center",children:"Job not found."})});const N=new Date(a.posted_at),P=new Date(a.application_deadline),Q=!isNaN(N.getTime()),Y=!isNaN(P.getTime()),c=20;return e.jsx(Ae,{theme:Xe,children:e.jsxs(V,{maxWidth:"lg",sx:{mt:4},children:[e.jsx(ve,{}),e.jsxs(ze,{elevation:4,sx:{borderRadius:2,backgroundColor:R(a.id)?"#e3f2fd":"white",transition:"background-color 0.3s","&:hover":{boxShadow:"0 4px 20px rgba(0, 0, 0, 0.1)"}},children:[e.jsx(Fe,{title:e.jsx(s,{variant:"h4",component:"span",children:a.title}),subheader:e.jsx(s,{variant:"h6",children:a.company.name}),avatar:e.jsx(Be,{fontSize:"large"}),action:m!=="employer"&&e.jsx(Le,{onClick:()=>q(a),sx:{ml:"auto"},disabled:O[a.id]==="loading",children:R(a.id)?e.jsx(xe,{color:"primary"}):e.jsx(fe,{})})}),e.jsx(Te,{}),e.jsx(He,{children:e.jsxs(i,{container:!0,spacing:2,children:[e.jsxs(i,{item:!0,xs:12,children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Job Description"}),e.jsx(s,{variant:"body1",children:a.description})]}),e.jsxs(i,{item:!0,xs:12,sm:6,children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,children:[e.jsx(Me,{sx:{verticalAlign:"middle",fontSize:c}}),"Posted on:"]}),e.jsx(s,{variant:"body1",color:"textSecondary",children:Q?N.toLocaleDateString():"Invalid date"})]}),e.jsxs(i,{item:!0,xs:12,sm:6,children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,children:[e.jsx(Ge,{sx:{verticalAlign:"middle",fontSize:c}}),"Application Deadline:"]}),e.jsx(s,{variant:"body1",color:"textSecondary",children:Y?P.toLocaleDateString():"Invalid date"})]}),e.jsxs(i,{item:!0,xs:12,sm:6,children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,children:[e.jsx(Ye,{sx:{verticalAlign:"middle",fontSize:c}}),"Location:"]}),e.jsx(s,{variant:"body1",color:"textSecondary",children:a.location})]}),e.jsxs(i,{item:!0,xs:12,sm:6,children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,children:[e.jsx($e,{sx:{verticalAlign:"middle",fontSize:c}}),"Salary:"]}),e.jsxs(s,{variant:"body1",color:"textSecondary",children:[a.salary_min.toLocaleString()," - ",a.salary_max.toLocaleString()]})]}),e.jsxs(i,{item:!0,xs:12,sm:6,children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,children:[e.jsx(We,{sx:{verticalAlign:"middle",fontSize:c}}),"Responsibilities:"]}),e.jsx(s,{variant:"body1",color:"textSecondary",children:a.responsibilities})]}),e.jsxs(i,{item:!0,xs:12,children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,children:[e.jsx(Ke,{sx:{verticalAlign:"middle",fontSize:c}}),"Qualifications:"]}),e.jsx(s,{variant:"body1",color:"textSecondary",children:a.qualifications})]}),e.jsxs(i,{item:!0,xs:12,children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,children:[e.jsx(Oe,{sx:{verticalAlign:"middle",fontSize:c}}),"Nice to Have:"]}),e.jsx(s,{variant:"body1",color:"textSecondary",children:a.nice_to_have})]}),e.jsxs(i,{item:!0,xs:12,children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,children:[e.jsx(J,{sx:{verticalAlign:"middle",fontSize:c}}),"Employment Type:"]}),e.jsx(s,{variant:"body1",color:"textSecondary",children:a.employment_type})]}),e.jsxs(i,{item:!0,xs:12,children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,children:[e.jsx(Qe,{sx:{verticalAlign:"middle",fontSize:c}}),"Experience Level:"]}),e.jsx(s,{variant:"body1",color:"textSecondary",children:a.experience_level})]}),e.jsxs(i,{item:!0,xs:12,children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,children:[e.jsx(J,{sx:{verticalAlign:"middle",fontSize:c}}),"Job Function:"]}),e.jsx(s,{variant:"body1",color:"textSecondary",children:a.job_function})]}),e.jsxs(i,{item:!0,xs:12,children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,children:[e.jsx(qe,{sx:{verticalAlign:"middle",fontSize:c}}),"Remote:"]}),e.jsx(s,{variant:"body1",color:"textSecondary",children:a.is_remote?"Yes":"No"})]}),a.skills&&a.skills.length>0&&e.jsxs(i,{item:!0,xs:12,children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Skills:"}),a.skills.map((t,j)=>e.jsx(Re,{label:t,sx:{mr:1,mb:1}},j))]}),e.jsxs(i,{item:!0,xs:12,children:[E&&e.jsx(_e,{severity:"success",onClose:()=>A(!1),children:"Application submitted successfully!"}),e.jsx(ke,{control:e.jsx(De,{checked:B,onChange:t=>U(t.target.checked),disabled:l||p.hasApplied}),label:"Use profile resume"}),!B&&e.jsx(Ne,{type:"file",onChange:t=>W(t.target.files[0]),disabled:l||p.hasApplied,sx:{mt:2}}),e.jsxs(_,{sx:{mt:2},children:[e.jsx(w,{variant:"contained",color:"primary",onClick:$,disabled:l||p.hasApplied,sx:{mr:2},children:p.hasApplied?"Already Applied":"Apply Now"}),e.jsx(w,{variant:"contained",color:"secondary",onClick:G,children:"Chat with Employer"})]})]})]})})]})]})})};export{Tt as default};
