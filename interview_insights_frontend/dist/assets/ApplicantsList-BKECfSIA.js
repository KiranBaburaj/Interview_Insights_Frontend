import{r as u,f as x,_ as $,j as e,A as R,F as ne,E,H as ie,I as le,aa as de,u as ce,b as U,a as pe,n as q,aq as he,ai as ue}from"./index-DHT8Rml8.js";import{d as xe}from"./Search-DwTHKrhI.js";import{d as je}from"./FilterList-D1hAJVEE.js";import{E as be}from"./EmployerNavbar-C9ZHJsgw.js";import{u as me}from"./useMediaQuery-5nE7v0ZU.js";import{g as A,a as M,s as H,u as D,c as N,b as S,B as C,T as i}from"./Box-WkZJFeTu.js";import{C as ve}from"./CircularProgress-BP_usneZ.js";import{T as ge}from"./ThemeProvider-eXZAPuqM.js";import{C as fe}from"./ListItemText-BBLZYx0L.js";import{C as ye}from"./Container-DqFns01P.js";import{C as Q,a as X}from"./CardContent-Chg_DSlN.js";import{T as Ce,S as K}from"./TextField-D2PmX3pb.js";import{I as _e}from"./IconButton-etZTaHjl.js";import{D as W}from"./Divider-GY2nFcLJ.js";import{G as V}from"./Grid-ANtRpTsE.js";import{A as F}from"./Avatar-BcrUs24E.js";import{M as v}from"./MenuItem-CuuokSOf.js";import{B as f}from"./Button-C_L-YrdJ.js";import{P as we}from"./List-CqLDm8Dp.js";import{D as ke,a as Te,b as Re}from"./DialogContent-CY47g_qC.js";import{D as $e}from"./DialogTitle-BTIs-NeP.js";import"./ExitToApp-TYZffi_D.js";import"./Business-cvp36hS-.js";import"./NotificationList-D7ux8bq1.js";import"./notificationWebSocket-BFRguuvw.js";import"./Snackbar-ByD5h8wS.js";import"./ListItem-CNi7ojiC.js";import"./useThemeProps-DUQUfvV8.js";import"./listItemTextClasses-Bxtkru50.js";import"./dividerClasses-Bt2EbJZ1.js";import"./useSlot-DsImxQEA.js";const ae=u.createContext();function Ae(s){return A("MuiTable",s)}M("MuiTable",["root","stickyHeader"]);const Me=["className","component","padding","size","stickyHeader"],He=s=>{const{classes:o,stickyHeader:r}=s;return S({root:["root",r&&"stickyHeader"]},Ae,o)},De=H("table",{name:"MuiTable",slot:"Root",overridesResolver:(s,o)=>{const{ownerState:r}=s;return[o.root,r.stickyHeader&&o.stickyHeader]}})(({theme:s,ownerState:o})=>x({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":x({},s.typography.body2,{padding:s.spacing(2),color:(s.vars||s).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},o.stickyHeader&&{borderCollapse:"separate"})),Y="table",Ne=u.forwardRef(function(o,r){const n=D({props:o,name:"MuiTable"}),{className:p,component:l=Y,padding:d="normal",size:c="medium",stickyHeader:h=!1}=n,a=$(n,Me),m=x({},n,{component:l,padding:d,size:c,stickyHeader:h}),_=He(m),k=u.useMemo(()=>({padding:d,size:c,stickyHeader:h}),[d,c,h]);return e.jsx(ae.Provider,{value:k,children:e.jsx(De,x({as:l,role:l===Y?null:"table",ref:r,className:N(_.root,p),ownerState:m},a))})}),L=u.createContext();function Se(s){return A("MuiTableBody",s)}M("MuiTableBody",["root"]);const Pe=["className","component"],ze=s=>{const{classes:o}=s;return S({root:["root"]},Se,o)},Ie=H("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(s,o)=>o.root})({display:"table-row-group"}),Be={variant:"body"},Z="tbody",Ue=u.forwardRef(function(o,r){const n=D({props:o,name:"MuiTableBody"}),{className:p,component:l=Z}=n,d=$(n,Pe),c=x({},n,{component:l}),h=ze(c);return e.jsx(L.Provider,{value:Be,children:e.jsx(Ie,x({className:N(h.root,p),as:l,ref:r,role:l===Z?null:"rowgroup",ownerState:c},d))})});function Ee(s){return A("MuiTableCell",s)}const Le=M("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),We=["align","className","component","padding","scope","size","sortDirection","variant"],Fe=s=>{const{classes:o,variant:r,align:n,padding:p,size:l,stickyHeader:d}=s,c={root:["root",r,d&&"stickyHeader",n!=="inherit"&&`align${R(n)}`,p!=="normal"&&`padding${R(p)}`,`size${R(l)}`]};return S(c,Ee,o)},Oe=H("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(s,o)=>{const{ownerState:r}=s;return[o.root,o[r.variant],o[`size${R(r.size)}`],r.padding!=="normal"&&o[`padding${R(r.padding)}`],r.align!=="inherit"&&o[`align${R(r.align)}`],r.stickyHeader&&o.stickyHeader]}})(({theme:s,ownerState:o})=>x({},s.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:s.vars?`1px solid ${s.vars.palette.TableCell.border}`:`1px solid
    ${s.palette.mode==="light"?ne(E(s.palette.divider,1),.88):ie(E(s.palette.divider,1),.68)}`,textAlign:"left",padding:16},o.variant==="head"&&{color:(s.vars||s).palette.text.primary,lineHeight:s.typography.pxToRem(24),fontWeight:s.typography.fontWeightMedium},o.variant==="body"&&{color:(s.vars||s).palette.text.primary},o.variant==="footer"&&{color:(s.vars||s).palette.text.secondary,lineHeight:s.typography.pxToRem(21),fontSize:s.typography.pxToRem(12)},o.size==="small"&&{padding:"6px 16px",[`&.${Le.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},o.padding==="checkbox"&&{width:48,padding:"0 0 0 4px"},o.padding==="none"&&{padding:0},o.align==="left"&&{textAlign:"left"},o.align==="center"&&{textAlign:"center"},o.align==="right"&&{textAlign:"right",flexDirection:"row-reverse"},o.align==="justify"&&{textAlign:"justify"},o.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(s.vars||s).palette.background.default})),j=u.forwardRef(function(o,r){const n=D({props:o,name:"MuiTableCell"}),{align:p="inherit",className:l,component:d,padding:c,scope:h,size:a,sortDirection:m,variant:_}=n,k=$(n,We),g=u.useContext(ae),w=u.useContext(L),P=w&&w.variant==="head";let y;d?y=d:y=P?"th":"td";let t=h;y==="td"?t=void 0:!t&&P&&(t="col");const b=_||w&&w.variant,z=x({},n,{align:p,component:y,padding:c||(g&&g.padding?g.padding:"normal"),size:a||(g&&g.size?g.size:"medium"),sortDirection:m,stickyHeader:b==="head"&&g&&g.stickyHeader,variant:b}),T=Fe(z);let I=null;return m&&(I=m==="asc"?"ascending":"descending"),e.jsx(Oe,x({as:y,ref:r,className:N(T.root,l),"aria-sort":I,scope:t,ownerState:z},k))});function Je(s){return A("MuiTableContainer",s)}M("MuiTableContainer",["root"]);const Ge=["className","component"],qe=s=>{const{classes:o}=s;return S({root:["root"]},Je,o)},Qe=H("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(s,o)=>o.root})({width:"100%",overflowX:"auto"}),Xe=u.forwardRef(function(o,r){const n=D({props:o,name:"MuiTableContainer"}),{className:p,component:l="div"}=n,d=$(n,Ge),c=x({},n,{component:l}),h=qe(c);return e.jsx(Qe,x({ref:r,as:l,className:N(h.root,p),ownerState:c},d))});function Ke(s){return A("MuiTableHead",s)}M("MuiTableHead",["root"]);const Ve=["className","component"],Ye=s=>{const{classes:o}=s;return S({root:["root"]},Ke,o)},Ze=H("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(s,o)=>o.root})({display:"table-header-group"}),es={variant:"head"},ee="thead",ss=u.forwardRef(function(o,r){const n=D({props:o,name:"MuiTableHead"}),{className:p,component:l=ee}=n,d=$(n,Ve),c=x({},n,{component:l}),h=Ye(c);return e.jsx(L.Provider,{value:es,children:e.jsx(Ze,x({as:l,className:N(h.root,p),ref:r,role:l===ee?null:"rowgroup",ownerState:c},d))})});function ts(s){return A("MuiTableRow",s)}const se=M("MuiTableRow",["root","selected","hover","head","footer"]),os=["className","component","hover","selected"],rs=s=>{const{classes:o,selected:r,hover:n,head:p,footer:l}=s;return S({root:["root",r&&"selected",n&&"hover",p&&"head",l&&"footer"]},ts,o)},as=H("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(s,o)=>{const{ownerState:r}=s;return[o.root,r.head&&o.head,r.footer&&o.footer]}})(({theme:s})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${se.hover}:hover`]:{backgroundColor:(s.vars||s).palette.action.hover},[`&.${se.selected}`]:{backgroundColor:s.vars?`rgba(${s.vars.palette.primary.mainChannel} / ${s.vars.palette.action.selectedOpacity})`:E(s.palette.primary.main,s.palette.action.selectedOpacity),"&:hover":{backgroundColor:s.vars?`rgba(${s.vars.palette.primary.mainChannel} / calc(${s.vars.palette.action.selectedOpacity} + ${s.vars.palette.action.hoverOpacity}))`:E(s.palette.primary.main,s.palette.action.selectedOpacity+s.palette.action.hoverOpacity)}}})),te="tr",oe=u.forwardRef(function(o,r){const n=D({props:o,name:"MuiTableRow"}),{className:p,component:l=te,hover:d=!1,selected:c=!1}=n,h=$(n,os),a=u.useContext(L),m=x({},n,{component:l,hover:d,selected:c,head:a&&a.variant==="head",footer:a&&a.variant==="footer"}),_=rs(m);return e.jsx(as,x({as:l,ref:r,className:N(_.root,p),role:l===te?null:"row",ownerState:m},h))}),re=le({palette:{primary:{main:"#00796b"},secondary:{main:"#b2dfdb"},text:{primary:"#212121",secondary:"#757575"}},typography:{fontFamily:"Roboto, sans-serif",h6:{fontFamily:"Montserrat, sans-serif",fontWeight:"bold"}}}),Is=()=>{const{jobId:s}=de(),o=ce(),r=U(t=>t.applicants.applicants),n=U(t=>t.applicants.status),p=U(t=>t.applicants.error),l=pe(),d=U(t=>t.auth.userid),[c,h]=u.useState(!1),[a,m]=u.useState(null),_=me(re.breakpoints.down("sm"));u.useEffect(()=>{o(q(s))},[o,s]);const k=(t,b)=>{o(he({applicantId:t,status:b})).then(()=>{o(q(s))})},g=t=>{t&&d&&o(ue({jobseekerId:t,employerId:d})).unwrap().then(()=>{l("/Employer/chat")}).catch(b=>{console.error("Failed to create chat room:",b)})},w=t=>{window.open(`https://www.interview-insights.site${t}`,"_blank")},P=t=>{m(t),h(!0)},y=()=>{h(!1),m(null)};return n==="loading"?e.jsx(C,{sx:{textAlign:"center",mt:4},children:e.jsx(ve,{})}):n==="failed"?e.jsx(C,{sx:{textAlign:"center",mt:4},children:e.jsxs(i,{color:"error",children:["Error: ",p]})}):e.jsx(ge,{theme:re,children:e.jsxs(C,{sx:{display:"flex"},children:[e.jsx(fe,{}),e.jsx(be,{}),e.jsxs(ye,{maxWidth:"lg",sx:{mt:4},children:[e.jsx(Q,{children:e.jsxs(X,{children:[e.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[e.jsxs(i,{variant:"h6",children:["Total Applicants: ",r.length]}),e.jsxs(C,{children:[e.jsx(Ce,{placeholder:"Search Applicants",variant:"outlined",size:"small",sx:{mr:2},InputProps:{startAdornment:e.jsx(xe,{})}}),e.jsx(_e,{children:e.jsx(je,{})})]})]}),e.jsx(W,{}),_?e.jsx(V,{container:!0,spacing:2,children:r.map(t=>e.jsx(V,{item:!0,xs:12,children:e.jsx(Q,{variant:"outlined",sx:{mb:2},children:e.jsxs(X,{children:[e.jsxs(C,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(F,{src:`https://www.interview-insights.site${t.job_seeker.profile_photo}`,alt:t.job_seeker.user.full_name,sx:{mr:2}}),e.jsx(i,{variant:"body1",children:t.job_seeker.user.full_name})]}),e.jsxs(K,{value:t.status||"N/A",onChange:b=>k(t.id,b.target.value),variant:"outlined",fullWidth:!0,sx:{mt:2},children:[e.jsx(v,{value:"applied",children:"Applied"}),e.jsx(v,{value:"reviewed",children:"Reviewed"}),e.jsx(v,{value:"interview_scheduled",children:"Interview Scheduled"}),e.jsx(v,{value:"interviewed",children:"Interviewed"}),e.jsx(v,{value:"hired",children:"Hired"}),e.jsx(v,{value:"rejected",children:"Rejected"})]}),e.jsx(f,{variant:"outlined",onClick:()=>w(t.resume),sx:{mt:2},children:"See Application"}),e.jsx(f,{variant:"contained",color:"primary",onClick:()=>l(`/schedule-interview/${t.id}`),sx:{mt:2,ml:1},children:"Schedule Interview"}),e.jsx(f,{onClick:()=>g(t.job_seeker.user.id),sx:{mt:2,ml:1},children:" Chat"}),e.jsx(f,{onClick:()=>P(t),sx:{mt:2,ml:1},children:"Profile"})]})})},t.id))}):e.jsx(Xe,{component:we,children:e.jsxs(Ne,{children:[e.jsx(ss,{children:e.jsxs(oe,{children:[e.jsx(j,{children:"Full Name"}),e.jsx(j,{children:"Hiring Stage"}),e.jsx(j,{children:"Applied Date"}),e.jsx(j,{children:"Schedule"}),e.jsx(j,{children:"Action"}),e.jsx(j,{children:"Chat"}),e.jsx(j,{children:"Profile"})]})}),e.jsx(Ue,{children:r.map(t=>e.jsxs(oe,{children:[e.jsx(j,{children:e.jsxs(C,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(F,{src:`https://www.interview-insights.site${t.job_seeker.profile_photo}`,alt:t.job_seeker.user.full_name,sx:{mr:2,width:40,height:40}}),t.job_seeker.user.full_name]})}),e.jsx(j,{children:e.jsxs(K,{value:t.status||"N/A",onChange:b=>k(t.id,b.target.value),variant:"outlined",children:[e.jsx(v,{value:"applied",children:"Applied"}),e.jsx(v,{value:"reviewed",children:"Reviewed"}),e.jsx(v,{value:"interview_scheduled",children:"Interview Scheduled"}),e.jsx(v,{value:"interviewed",children:"Interviewed"}),e.jsx(v,{value:"hired",children:"Hired"}),e.jsx(v,{value:"rejected",children:"Rejected"})]})}),e.jsx(j,{children:new Date(t.applied_at).toLocaleDateString()}),e.jsx(j,{children:e.jsx(f,{variant:"outlined",onClick:()=>w(t.resume),children:"See Application"})}),e.jsx(j,{children:e.jsx(f,{variant:"contained",color:"primary",onClick:()=>l(`/schedule-interview/${t.id}`),children:"Schedule Interview"})}),e.jsx(j,{children:e.jsx(f,{onClick:()=>g(t.job_seeker.user.id),children:" Chat"})}),e.jsx(j,{children:e.jsx(f,{onClick:()=>P(t),children:"Profile"})})]},t.id))})]})})]})}),e.jsxs(ke,{open:c,onClose:y,fullWidth:!0,maxWidth:"sm",children:[e.jsx($e,{children:"Applicant Profile"}),e.jsx(Te,{children:a&&e.jsxs("div",{children:[e.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(F,{src:`https://www.interview-insights.site${a.job_seeker.profile_photo}`,alt:a.job_seeker.user.full_name,sx:{mr:2,width:80,height:80}}),e.jsx(i,{variant:"h6",children:a.job_seeker.user.full_name})]}),e.jsxs(i,{variant:"body1",children:[e.jsx("strong",{children:"Email:"})," ",a.job_seeker.user.email]}),e.jsxs(i,{variant:"body1",children:[e.jsx("strong",{children:"Phone Number:"})," ",a.job_seeker.phone_number]}),e.jsxs(i,{variant:"body1",children:[e.jsx("strong",{children:"Date of Birth:"})," ",new Date(a.job_seeker.date_of_birth).toLocaleDateString()]}),e.jsxs(i,{variant:"body1",children:[e.jsx("strong",{children:"Bio:"})," ",a.job_seeker.bio]}),e.jsxs(i,{variant:"body1",children:[e.jsx("strong",{children:"LinkedIn:"})," ",a.job_seeker.linkedin_url||"N/A"]}),e.jsxs(i,{variant:"body1",children:[e.jsx("strong",{children:"Portfolio:"})," ",a.job_seeker.portfolio_url||"N/A"]}),e.jsxs(i,{variant:"body1",children:[e.jsx("strong",{children:"Current Job Title:"})," ",a.job_seeker.current_job_title]}),e.jsxs(i,{variant:"body1",children:[e.jsx("strong",{children:"Job Preferences:"})," ",a.job_seeker.job_preferences]}),e.jsx(i,{variant:"h6",style:{marginTop:"16px"},children:"Work Experience"}),a.job_seeker.work_experience&&a.job_seeker.work_experience.length>0?a.job_seeker.work_experience.map(t=>e.jsxs("div",{children:[e.jsxs(i,{variant:"body1",children:[e.jsx("strong",{children:"Job Title:"})," ",t.job_title]}),e.jsxs(i,{variant:"body1",children:[e.jsx("strong",{children:"Company:"})," ",t.company_name]}),e.jsxs(i,{variant:"body1",children:[e.jsx("strong",{children:"Location:"})," ",t.company_location]}),e.jsxs(i,{variant:"body1",children:[e.jsx("strong",{children:"Start Date:"})," ",new Date(t.start_date).toLocaleDateString()]}),e.jsxs(i,{variant:"body1",children:[e.jsx("strong",{children:"End Date:"})," ",new Date(t.end_date).toLocaleDateString()||"Present"]}),e.jsx(W,{style:{margin:"10px 0"}})]},t.id)):e.jsx(i,{variant:"body1",children:"No work experience available."}),e.jsx(i,{variant:"h6",style:{marginTop:"16px"},children:"Skills"}),a.job_seeker.skills&&a.job_seeker.skills.length>0?a.job_seeker.skills.map(t=>e.jsxs(i,{variant:"body1",children:[e.jsx("strong",{children:t.skill_name})," - ",t.proficiency_level]},t.id)):e.jsx(i,{variant:"body1",children:"No skills available."}),e.jsx(i,{variant:"h6",style:{marginTop:"16px"},children:"Interview Feedback"}),a.job_seeker.interview_feedback&&a.job_seeker.interview_feedback.length>0?a.job_seeker.interview_feedback.filter(t=>t.is_approved).map(t=>{var O,J,G;const b=(O=a.job_seeker.interview_schedule)==null?void 0:O.find(B=>B.id===t.interview_schedule);console.log(b);const z=(J=a.job_seeker.myapplications)==null?void 0:J.find(B=>B.id===b.job_application);(G=a.job_seeker.interview_schedule)==null||G.find(B=>B.id===t.interview_schedule);const T=z?z.job_details:null,I=T?T.company:null;return e.jsxs("div",{children:[e.jsxs(i,{variant:"body1",children:[e.jsx("strong",{children:"Stage:"})," ",t.stage]}),e.jsxs(i,{variant:"body1",children:[e.jsx("strong",{children:"Feedback:"})," ",t.feedback]}),e.jsxs(i,{variant:"body1",children:[e.jsx("strong",{children:"Provided At:"})," ",new Date(t.provided_at).toLocaleDateString()]}),T&&I&&e.jsxs("div",{children:[e.jsxs(i,{variant:"body1",children:[e.jsx("strong",{children:"Job Title:"})," ",T.title]}),e.jsxs(i,{variant:"body1",children:[e.jsx("strong",{children:"Company:"})," ",I.name]})]}),e.jsx(W,{style:{margin:"10px 0"}})]},t.id)}):e.jsx(i,{variant:"body1",children:"No feedback available."})]})}),e.jsx(Re,{children:e.jsx(f,{onClick:y,children:"Close"})})]})]})]})})};export{Is as default};
