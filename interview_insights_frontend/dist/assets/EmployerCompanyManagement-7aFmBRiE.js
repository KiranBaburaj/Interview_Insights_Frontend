import{u as w,b as p,r as m,w as D,j as e,Q as T,S as z}from"./index-B5BNfIig.js";import{E as B}from"./EmployerNavbar-CdOod49a.js";import{C as q}from"./Container-DqcMh56C.js";import{B as x,T as h}from"./Box-DjgXiKMU.js";import{P as F}from"./List-DPuDR7rF.js";import{B as u}from"./Button-oX7eIhKa.js";import{T as o}from"./TextField-BWQUL4EV.js";import{C as I}from"./CircularProgress-BWUOinEA.js";import{C as L}from"./ListItemText-BaLash2z.js";import{T as P}from"./ExitToApp-Bq_xm_Xm.js";import"./Business-CM7LYknt.js";import"./NotificationList-nHemUURw.js";import"./notificationWebSocket-6azMv-Tz.js";import"./MenuItem-BOnRPhPH.js";import"./dividerClasses-Dw8eJhyn.js";import"./listItemTextClasses-ByVx4Tst.js";import"./IconButton-nNXHuqlW.js";import"./Snackbar-D0JSR5zw.js";import"./useMediaQuery-Dkej5RYT.js";import"./useThemeProps-BFzyoFRo.js";import"./Divider-CqIoC7O3.js";import"./Avatar-DxIlmGow.js";import"./useSlot-IjikaKVP.js";import"./ListItem-QYz-A4Wb.js";const M=()=>{const i=w(),{companies:d,status:_,error:c}=p(t=>t.company);p(t=>t.auth);const{userid:l}=p(t=>t.auth);console.log(l);const[a,s]=m.useState({name:"",logo_url:"",website_url:"",industry:"",company_size:"",founded_date:"",description:"",headquarters_location:"",employee_count:"",tech_stack:"",gst_document:null,is_approved:!1}),[g,y]=m.useState(!1),[f,j]=m.useState(!1);m.useEffect(()=>{i(D())},[i]),m.useEffect(()=>{if(d.length>0){const t=d.find(r=>r.employer==l);t&&(j(!0),s(t))}},[d,l]);const n=t=>{const{name:r,value:S,type:W,files:k}=t.target;s(W==="file"?{...a,[r]:k[0]}:{...a,[r]:S})},v=t=>{t.preventDefault();const r={...a,employer:l};a.id?i(T(r)):i(z(r)),C()},C=()=>{s({name:"",logo_url:"",website_url:"",industry:"",company_size:"",founded_date:"",description:"",headquarters_location:"",employee_count:"",tech_stack:"",gst_document:null,is_approved:!1}),y(!1)},b=t=>{s(t),y(!0)},E=t=>{};return e.jsx(q,{maxWidth:"md",children:e.jsx(x,{sx:{mt:4},children:e.jsxs(F,{elevation:3,sx:{p:4},children:[e.jsx(h,{variant:"h4",gutterBottom:!0,children:"Company Management"}),!f&&!g&&e.jsx(u,{variant:"contained",color:"primary",onClick:()=>y(!0),children:"Create Company"}),(g||!f)&&e.jsxs("form",{onSubmit:v,encType:"multipart/form-data",children:[e.jsx(o,{fullWidth:!0,margin:"normal",id:"name",name:"name",label:"Company Name",variant:"outlined",value:a.name,onChange:n,required:!0}),e.jsx(o,{fullWidth:!0,margin:"normal",id:"logo_url",name:"logo_url",label:"Logo URL",variant:"outlined",value:a.logo_url,onChange:n}),e.jsx(o,{fullWidth:!0,margin:"normal",id:"website_url",name:"website_url",label:"Website URL",variant:"outlined",value:a.website_url,onChange:n}),e.jsx(o,{fullWidth:!0,margin:"normal",id:"industry",name:"industry",label:"Industry",variant:"outlined",value:a.industry,onChange:n}),e.jsx(o,{fullWidth:!0,margin:"normal",id:"company_size",name:"company_size",label:"Company Size",variant:"outlined",value:a.company_size,onChange:n}),e.jsx(o,{fullWidth:!0,margin:"normal",id:"founded_date",name:"founded_date",label:"Founded Date",type:"date",variant:"outlined",value:a.founded_date,onChange:n,inputProps:{max:new Date().toISOString().split("T")[0]}}),e.jsx(o,{fullWidth:!0,margin:"normal",id:"description",name:"description",label:"Description",multiline:!0,rows:4,variant:"outlined",value:a.description,onChange:n}),e.jsx(o,{fullWidth:!0,margin:"normal",id:"headquarters_location",name:"headquarters_location",label:"Headquarters Location",variant:"outlined",value:a.headquarters_location,onChange:n}),e.jsx(o,{fullWidth:!0,margin:"normal",id:"employee_count",name:"employee_count",label:"Employee Count",type:"number",variant:"outlined",value:a.employee_count,onChange:n}),e.jsx(o,{fullWidth:!0,margin:"normal",id:"tech_stack",name:"tech_stack",label:"Tech Stack",variant:"outlined",value:a.tech_stack,onChange:n}),e.jsx(u,{type:"submit",variant:"contained",color:"primary",size:"large",sx:{mt:2},children:a.id?"Update Company":"Add Company"}),e.jsx(u,{variant:"outlined",color:"secondary",size:"large",sx:{mt:2,ml:2},onClick:C,children:"Cancel"})]}),_==="loading"&&e.jsx(I,{sx:{mt:2}}),c&&e.jsx(h,{color:"error",sx:{mt:2},children:typeof c=="object"?JSON.stringify(c):c}),f&&e.jsxs(x,{sx:{mt:4},children:[e.jsx(h,{variant:"h5",gutterBottom:!0,children:"Existing Company"}),e.jsx("ul",{children:d.filter(t=>t.employer==l).map(t=>e.jsxs("li",{children:[t.name,e.jsx(u,{variant:"outlined",color:"primary",onClick:()=>b(t),sx:{mx:1},children:"Edit"}),e.jsx(u,{variant:"outlined",color:"error",onClick:()=>E(t.id),sx:{mx:1},children:"Delete"})]},t.id))})]})]})})})},me=()=>(p(i=>i.auth),e.jsxs(x,{sx:{display:"flex"},children:[e.jsx(L,{}),e.jsx(B,{}),e.jsxs(x,{component:"main",sx:{flexGrow:1,p:3,width:{sm:"calc(100% - 240px)"}},children:[e.jsx(P,{}),e.jsx(h,{variant:"h4",component:"h1",gutterBottom:!0,children:e.jsx(M,{})})]})]}));export{me as default};
